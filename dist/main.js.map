{"version":3,"sources":["webpack://Mason/webpack/universalModuleDefinition","webpack://Mason/webpack/bootstrap","webpack://Mason/./src/grid/index.js","webpack://Mason/./src/grid/track-sizing.js","webpack://Mason/./src/index.js","webpack://Mason/./src/mason.js","webpack://Mason/./src/utils/constants.js","webpack://Mason/./src/utils/index.js"],"names":["validSizes","Grid","setup","_tsa","TrackResolver","props","_config","mapping","key","value","_domTree","domTree","_clearLayoutOfChildren","_sanitizeTracks","_sanitizeItems","_inflateTracks","_assignCoordinatesToCells","children","length","forEach","child","layout","style","config","trackInfo","_fetchTrackInformation","gridTemplateRows","row","nameToLineMap","lineToNameMap","rowTracks","tracks","gridTemplateColumns","col","colTracks","i","len","splittedTrackInfo","split","nameList","sizeList","sanitizedTracks","startLineNames","endLineNames","filter","track","size","toLowerCase","replace","indexOf","isNaN","name","map","trim","push","start","end","items","sanitizedItems","itemStyle","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","sizedTracks","parent","tsa","clear","set","item","width","resolveTracks","index","calculatedStyle","height","rowTrackdp","colTrackdp","baseSize","x","y","x2","y2","computeGridLayout","count","grid","getDisplayProperty","computeLayout","compute","getMultiplierOfFr","_frSpaceDistributorHelper","totalSpaceUsed","containerSize","freeSpace","spacePerFrTrack","eligibleTracks","totalFrTrackRatio","multiplier","_intrinsicSpaceDistributorHelper","spacePerIntrinsicTrack","info","_initTrackSize","_initItems","_tracks","trackAr","type","growthLimit","frTracks","intrinsicTracks","Infinity","_items","_getParentSize","sort","a","b","gap1","gap2","parentTracks","widthOfParentTracks","_placeNonSpanningItems","_placeSpanningItems","_distributeFreeSpace","nonSpanningItems","trackIndex","Math","max","trackId","getComputeFn","display","DISPLAY_GRID","DISPLAY_FLEX"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA,IAAMA,UAAU,GAAG,CAAC,MAAD,CAAnB;;IACMC,I;;;AACJ,kBAAe;AAAA;;AACb,SAAKC,KAAL;AACD;;;;4BAEQ;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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Mason\"] = factory();\n\telse\n\t\troot[\"Mason\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { getDisplayProperty } from \"../utils\";\nimport { computeLayout } from \"../mason\";\nimport TrackResolver from \"./track-sizing\";\n\n\n// const parseTemplete = (template) => template.map((size, index) => ({ size, start: index + 1, end: index + 2 })),\n//   withinBounds = (rowStart, rowEnd, colStart, colEnd, templateRows, templateColumns) => {\n//     return rowStart - 1 >= 0\n//       && rowStart - 1 < templateRows.length\n//       && rowEnd - 2 >= 0\n//       && rowEnd - 2 < templateRows.length\n//       && colStart - 1 >= 0\n//       && colStart - 1 < templateColumns.length\n//       && colEnd - 2 >= 0\n//       && colEnd - 2 < templateColumns.length;\n//   },\n//   addCoordinatesToCells = (gridMatrix, children) => {\n//     let i, j, item, usedX = 0, usedY = 0, cell = {};\n//     for (i = 0; i < gridMatrix.length; i++) {\n//       usedX = 0;\n//       // usedY = null;\n//       for (j = 0; j < gridMatrix[i].length; j++) {\n//         item = gridMatrix[i][j];\n\n//         item.startX = usedX;\n//         item.endX = usedX + item.columnSize;\n//         usedX = item.endX;\n\n//         item.startY = usedY;\n//         item.endY = usedY + item.rowSize;\n\n//         if (j == gridMatrix[i].length - 1) {\n//           usedY = usedY + item.rowSize;\n//         }\n//       }\n//     }\n\n//     children.forEach(child => {\n//       cell = gridMatrix[child.matrixPosition.row][child.matrixPosition.column];\n//       child.layout = {};\n//       child.layout.width = child.style.width;\n//       child.layout.height = child.style.height;\n//       child.layout.startX = cell.startX;\n//       child.layout.startY = cell.startY;\n//       child.layout.endX = cell.endX;\n//       child.layout.endY = cell.endY;\n//     });\n//   },\n//   placeChildrenInGrid = (children, gridMatrix, templateRows, templateColumns) => {\n//     children.forEach(child => {\n//       const { gridRowStart, gridRowEnd, gridColumnStart, gridColumnEnd } = child.style;\n//       if (withinBounds(gridRowStart, gridRowEnd, gridColumnStart, gridColumnEnd, templateRows, templateColumns)) {\n//         gridMatrix[gridRowStart - 1][gridColumnStart - 1].item = child;\n//         child.matrixPosition = {\n//           row: gridRowStart - 1,\n//           column: gridColumnStart - 1\n//         };\n//         // TODO:  consider spanning items\n//       }\n//     });\n//   },\n//   inflateGridCells = (tsa, children, columns, rows, containerHeight, containerWidth, gridMatrix) => {\n//     let i,\n//       j;\n\n//     columns = tsa.set('tracks', columns)\n//       .set('items', children.map(c => ({ start: c.style.gridColumnStart, end: c.style.gridColumnEnd, size: c.style.width })))\n//       .set('containerSize', containerHeight)\n//       .resolveTracks();\n\n//     rows = tsa.set('tracks', rows)\n//       .set('items', children.map(r => ({ start: r.style.gridRowStart, end: r.style.gridRowEnd, size: r.style.height })))\n//       .set('containerSize', containerWidth)\n//       .resolveTracks();\n\n//     for (i = 0; i < rows.length; i++) {\n//       for (j = 0; j < rows.length; j++) {\n//         gridMatrix[i][j].rowSize = rows[i].baseSize;\n//         gridMatrix[i][j].columnSize = columns[j].baseSize;\n//       }\n//     }\n//   },\n//   _computeGridLayout = (domTree) => {\n//     const gridMatrix = [],\n//       styles = domTree.style || {},\n//       children = domTree.children || [],\n//       { templateRows, templateColumns, width, height } = styles,\n//       tsa = new TrackResolver(),\n//       createGridMatrix = () => {\n//         let i;\n//         for (i = 0; i < formattedRows.length; i++) {\n//           gridMatrix.push(formattedColumns.map(c => ({\n//             columnSize: +c.size,\n//             rowSize: +formattedRows[i].size\n//           })));\n//         }\n//       };\n\n//     let i,\n//       formattedRows = parseTemplete(templateRows),\n//       formattedColumns = parseTemplete(templateColumns);\n\n//     for (i = 0; i < children.length; i++) {\n//       if (getDisplayProperty(children[i])) {\n//         children[i] = computeLayout(children[i]);\n//       }\n//     }\n\n//     // Create the grid matrix\n//     createGridMatrix();\n//     // Allocate children to grid matrix\n//     placeChildrenInGrid(children, gridMatrix, templateRows, templateColumns);\n//     // Size the rows and tracks\n//     inflateGridCells(tsa, children, formattedColumns, formattedRows, height, width, gridMatrix);\n//     // Calling this second time to ensure that if some item's min-content-contribution has changed\n//     inflateGridCells(tsa, children, formattedColumns, formattedRows, height, width, gridMatrix);\n//     // Adds x,y coordinates to each cell depending on position and dimensions\n//     addCoordinatesToCells(gridMatrix, children);\n\n//     return domTree;\n//   };\n\nconst validSizes = ['auto'];\nclass Grid {\n  constructor () {\n    this.setup();\n  }\n\n  setup () {\n    this._tsa = new TrackResolver();\n    this.props = {};\n    this._config = {\n      mapping: {}\n    };\n\n    return this;\n  }\n\n  set (key, value) {\n    this.props[key] = value;\n\n    return this;\n  }\n\n  compute (_domTree) {\n    let domTree = _domTree || this.props.domTree;\n\n    this._clearLayoutOfChildren(domTree)\n      ._sanitizeTracks(domTree)\n      ._sanitizeItems(domTree)\n      ._inflateTracks()\n      ._assignCoordinatesToCells(domTree);\n  }\n\n  _clearLayoutOfChildren(_domTree) {\n    let domTree = _domTree || this.props.domTree;\n\n    if (domTree.children && domTree.children.length) {\n      domTree.children.forEach(child => delete child.layout);\n    }\n\n    return this;\n  }\n  _sanitizeTracks (_domTree = {}) {\n    let style = _domTree.style,\n      config = this._config,\n      trackInfo;\n\n    trackInfo = this._fetchTrackInformation(style.gridTemplateRows);\n    // trackInfo = this._considerTrackInfoFromChildren(_domTree, trackInfo, 'row');\n    config.mapping.row = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.rowTracks = trackInfo.tracks;\n\n    trackInfo = this._fetchTrackInformation(style.gridTemplateColumns);\n    config.mapping.col = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.colTracks = trackInfo.tracks;\n\n    return this;\n  }\n\n  _fetchTrackInformation (tracks) {\n    let i,\n      len,\n      splittedTrackInfo = tracks.split(' '),\n      nameList,\n      sizeList,\n      sanitizedTracks = [{}],\n      startLineNames,\n      endLineNames,\n      nameToLineMap = {},\n      lineToNameMap = {};\n\n    nameList = splittedTrackInfo.filter(track => {\n      if (typeof track === 'string' && track.length) {\n        len = track.length;\n        if (track[0] === '['  && track[len - 1] === ']') {\n          return true;\n        }\n        return false;\n      }\n      return true;\n    });\n\n    sizeList = splittedTrackInfo.filter(size => {\n      if (!size) return false;\n\n      len = (size + '').toLowerCase().replace(/px|fr/, '');\n      if (validSizes.indexOf(len) >= 0 || !isNaN(len)) {\n        return true;\n      }\n      return false;\n    });\n\n    for (i = 0, len = sizeList.length; i < len; i++) {\n      startLineNames = (nameList[i] && nameList[i].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 1 + ''];\n      endLineNames = (nameList[i + 1] && nameList[i + 1].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 2 + ''];\n\n      sanitizedTracks.push({\n        start: i + 1,\n        end: i + 2,\n        size: sizeList[i],\n      });\n\n      // A line can have multiple names but a name can only be assigned to a single line\n      lineToNameMap[i + 1] = startLineNames;\n      lineToNameMap[i + 2] = endLineNames;\n      startLineNames.forEach(name => nameToLineMap[name] = i + 1);\n      endLineNames.forEach(name => nameToLineMap[name] = i + 2);\n      nameToLineMap[i + 1] = i + 1;\n      nameToLineMap[i + 2] = i + 2;\n    }\n\n    return {\n      tracks: sanitizedTracks,\n      nameToLineMap,\n      lineToNameMap\n    };\n  }\n\n  _sanitizeItems (_domTree) {\n    let items = (_domTree || this.props.domTree).children || [],\n      mapping = this._config.mapping,\n      sanitizedItems = [],\n      itemStyle,\n      i,\n      len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      itemStyle = items[i].style;\n      \n      sanitizedItems.push({\n        ...items[i],\n        rowStart: mapping.row.nameToLineMap[itemStyle.gridRowStart],\n        rowEnd: mapping.row.nameToLineMap[itemStyle.gridRowEnd],\n        colStart: mapping.col.nameToLineMap[itemStyle.gridColumnStart],\n        colEnd: mapping.col.nameToLineMap[itemStyle.gridColumnEnd]\n      });\n    }\n\n    this._config.sanitizedItems = sanitizedItems;\n    return this;\n  }\n\n  _inflateTracks () {\n    let { sanitizedItems, colTracks, rowTracks } = this._config,\n      sizedTracks,\n      { parent, domTree } = this.props,\n      tsa = new TrackResolver();\n\n    sizedTracks = tsa.clear()\n      .set('tracks', colTracks)\n      .set('items', sanitizedItems.map(item => ({\n        start: item.colStart,\n        end: item.colEnd,\n        size: (item.style && item.style.width) || 'auto'\n      })))\n      .set('containerSize', (parent.layout && parent.layout.width) || (domTree.style && domTree.style.width) || 'auto')\n      .resolveTracks();\n\n    colTracks.forEach((track,index) => track.calculatedStyle = sizedTracks[index]);\n\n    sizedTracks = tsa.clear()\n      .set('tracks', rowTracks)\n      .set('items', sanitizedItems.map(item => ({\n        start: item.rowStart,\n        end: item.rowEnd,\n        size: (item.style && item.style.height) || 'auto'\n      })))\n      .set('containerSize', (parent.layout && parent.layout.height) || (domTree.style && domTree.style.height) || 'auto')\n      .resolveTracks();\n\n    rowTracks.forEach((track,index) => track.calculatedStyle = sizedTracks[index]);\n    return this;\n  }\n\n  _assignCoordinatesToCells (_domTree) {\n    let domTree = _domTree || this.props.domTree,\n      { sanitizedItems, rowTracks, colTracks } = this._config,\n      item,\n      len,\n      i,\n      rowTrackdp = [0],\n      colTrackdp = [0];\n\n    for (i = 1, len = rowTracks.length; i < len; i++) {\n      rowTrackdp[i] = rowTrackdp[i - 1] + rowTracks[i].calculatedStyle.baseSize;\n    }\n\n    for (i = 1, len = colTracks.length; i < len; i++) {\n      colTrackdp[i] = colTrackdp[i - 1] + colTracks[i].calculatedStyle.baseSize;\n    }\n    domTree.layout = {\n      width: isNaN(domTree.width) ? colTrackdp[colTrackdp.length - 1] : domTree.width,\n      height: isNaN(domTree.height) ? rowTrackdp[rowTrackdp.length - 1] : domTree.height\n    };\n    domTree.children.forEach((child, index) => {\n      item = sanitizedItems[index];\n      child.layout = {\n        x: colTrackdp[item.colStart - 1],\n        y: rowTrackdp[item.rowStart - 1],\n        x2: colTrackdp[item.colEnd - 1],\n        y2: rowTrackdp[item.rowEnd - 1]\n      };\n    });\n  }\n}\n\n// const computeGridLayout = (domTree, parent = {}) => {\n//   computeGridLayoutHelper(domTree, parent);\n//   computeGridLayoutHelper(domTree, parent);\n// };\n\nconst computeGridLayout = (domTree, parent, count = 1) => {\n  let i,\n    len,\n    child,\n    grid;\n\n  if (!domTree || !domTree.style) {\n    return;\n  }\n\n  for (i = 0, len = (domTree.children && domTree.children.length); i < len; i++) {\n    child = domTree.children[i];\n    if (getDisplayProperty(child)) {\n      computeLayout(child, domTree);\n    }\n  }\n\n  grid = new Grid();\n  grid.set('domTree', domTree)\n    .set('parent', parent || {})\n    .compute();\n\n  if (count < 2) {\n    computeGridLayout(domTree, parent, 2);\n  }\n};\n\nexport {\n  computeGridLayout\n};","const getMultiplierOfFr = size => +size.replace(/fr/, ''),\n  _frSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerFrTrack,\n      eligibleTracks,\n      totalFrTrackRatio = 0;\n      \n    if (!tracks.length) {\n      return;\n    }\n\n    tracks.forEach(track => totalFrTrackRatio += track.multiplier);\n\n    freeSpace = containerSize - totalSpaceUsed;\n    spacePerFrTrack = freeSpace / totalFrTrackRatio;\n    \n    eligibleTracks = tracks.filter(track => track.baseSize <= track.multiplier * spacePerFrTrack);\n\n    if (eligibleTracks.length < tracks.length) {\n      tracks.filter(track => track.baseSize > track.multiplier * spacePerFrTrack).forEach(track => totalSpaceUsed += track.baseSize);\n      return _frSpaceDistributorHelper(eligibleTracks, totalSpaceUsed, containerSize);\n    } else {\n      eligibleTracks.forEach(track => track.baseSize = track.multiplier * spacePerFrTrack);\n    }\n  },\n  _intrinsicSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerIntrinsicTrack;\n\n    if (!tracks.length) {\n      return;\n    }\n\n    freeSpace = containerSize - totalSpaceUsed;\n    spacePerIntrinsicTrack = freeSpace / tracks.length;\n\n    tracks.forEach(track => track.baseSize += spacePerIntrinsicTrack);\n  };\n\nclass TrackResolver {\n  constructor (tracks = [], items = [], containerSize = 600) {\n    this.clear();\n\n    this.set('tracks', tracks);\n    this.set('items', items);\n    this.set('containerSize', containerSize);\n    return this;\n  }\n\n  set (key, info) {\n    this.props[key] = info;\n\n    switch (key) {\n    case 'tracks':\n      this._initTrackSize(); break;\n    case 'items':\n      this._initItems(); break;\n    case 'containerSize': \n      this.props[key] = isNaN(+info) ? 0 : +info;\n    }\n    return this;\n  }\n\n  get (key) {\n    return this.props[key];\n  }\n\n  _initTrackSize (_tracks) {\n    let tracks = _tracks || this.props.tracks || [],\n      config = this._config,\n      trackAr = [{}],\n      i,\n      len,\n      size,\n      type,\n      multiplier,\n      baseSize,\n      growthLimit;\n\n    config.frTracks = [];\n    config.intrinsicTracks = [];\n\n    for (i = 1, len = tracks.length; i < len; i++) {\n      size = tracks[i].size;\n\n      multiplier = 1;\n      if (!isNaN(+size)) {\n        baseSize = growthLimit = +size;\n        type = 'fixed';\n      } else if (size.indexOf('fr') > 0) {\n        baseSize = growthLimit = 0;\n        config.frTracks.push(i);\n        type = 'flex';\n        multiplier = getMultiplierOfFr(size);\n      } else {\n        baseSize = 0;\n        growthLimit = Infinity;\n        type = 'intrinsic';\n        config.intrinsicTracks.push(i);\n      }\n\n      trackAr.push({\n        ...tracks[i],\n        type,\n        multiplier,\n        baseSize,\n        growthLimit\n      });\n    }\n\n    return (config.sanitizedTracks = trackAr);\n  }\n\n  _initItems (_items) {\n    let items = _items || this.props.items || [],\n      sanitizedItems = [],\n      item,\n      i,\n      len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      sanitizedItems.push({...items[i]});\n\n      item = sanitizedItems[i];\n\n      item.size = isNaN(item.size) ? this._getParentSize(item) : +item.size;\n    }\n\n    sanitizedItems.sort(function (a, b) {\n      let gap1 = a.end - a.start,\n        gap2 = b.end - b.start;\n\n      if (gap1 === gap2) {\n        return a.start < b.start;\n      } else return gap1 < gap2;\n    });\n\n    return (this._config.sanitizedItems = sanitizedItems);\n  }\n\n  _getParentSize (item) {\n    let { sanitizedTracks } = this._config,\n      parentTracks,\n      widthOfParentTracks = 0;\n\n    parentTracks = sanitizedTracks.filter(track => (track.start >= item.start && track.end <= item.end));\n\n    parentTracks.forEach(track => widthOfParentTracks += track.baseSize);\n\n    return (widthOfParentTracks || 0);\n  }\n\n  resolveTracks () {\n    this._placeNonSpanningItems()\n      ._placeSpanningItems()\n      ._distributeFreeSpace();\n\n    return this._config.sanitizedTracks;\n  }\n\n  _placeNonSpanningItems () {\n    let { sanitizedItems, sanitizedTracks } = this._config,\n      nonSpanningItems = sanitizedItems.filter(item => (item.end - item.start) === 1),\n      track,\n      trackIndex;\n\n    nonSpanningItems.forEach(item => {\n      trackIndex = item.start;\n      track = sanitizedTracks[trackIndex];\n\n      if (track.type !== 'fixed') {\n        track.baseSize = Math.max(track.baseSize, item.size);\n        track.growthLimit = Math.max(track.growthLimit, track.baseSize);\n      }\n    });\n\n    return this;\n  }\n\n  _placeSpanningItems () {\n    return this;\n  }\n\n  _distributeFreeSpace () {\n    let { frTracks, intrinsicTracks, sanitizedTracks } = this._config,\n      { containerSize } = this.props,\n      totalSpaceUsed = 0;\n\n    sanitizedTracks.forEach(track => totalSpaceUsed += (track.baseSize || 0));\n\n    if (totalSpaceUsed < containerSize) {\n      if (frTracks.length) {\n        frTracks.forEach((trackId, index) => {frTracks[index] = sanitizedTracks[trackId];});\n        frTracks.forEach(track => totalSpaceUsed -= track.baseSize);\n        _frSpaceDistributorHelper(frTracks, totalSpaceUsed, containerSize);\n      } else if (intrinsicTracks.length) {\n        intrinsicTracks.forEach((trackId, index) => {intrinsicTracks[index] = sanitizedTracks[trackId];});\n        _intrinsicSpaceDistributorHelper(intrinsicTracks, totalSpaceUsed, containerSize);\n      }\n    }\n    return this;\n  }\n\n  clear () {\n    this.props = {};\n    this._config = {\n      frTracks: [],\n      intrinsicTracks: []\n    };\n\n    return this;\n  }\n}\n\nexport default TrackResolver;\n","import { computeLayout } from './mason';\n\nexport {\n  computeLayout\n};\n","import {computeGridLayout} from \"./grid\";\nimport { DISPLAY_GRID, DISPLAY_FLEX } from \"./utils/constants\";\nimport { getDisplayProperty } from \"./utils\";\n\nconst getComputeFn = (display) => {\n  switch(display) {\n    case DISPLAY_GRID: return computeGridLayout;\n    case DISPLAY_FLEX: return computeGridLayout;\n    default:\n    // Probably throw unsupported error?\n    return computeGridLayout;\n  }\n},\ncomputeLayout = (domTree = {}, parent) => {\n  return getComputeFn(getDisplayProperty(domTree))(domTree, parent);\n};\n\nexport {\n  computeLayout\n};\n","export const DISPLAY_GRID = 'grid';\nexport const DISPLAY_FLEX = 'flex';","const getDisplayProperty = (domTree) => {\n  return domTree.style && domTree.style.display;\n};\n\nexport {\n  getDisplayProperty\n};"],"sourceRoot":""}