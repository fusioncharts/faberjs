{"version":3,"sources":["webpack://Mason/webpack/universalModuleDefinition","webpack://Mason/webpack/bootstrap","webpack://Mason/./src/grid/index.js","webpack://Mason/./src/grid/track-sizing.js","webpack://Mason/./src/index.js","webpack://Mason/./src/mason.js","webpack://Mason/./src/utils/constants.js","webpack://Mason/./src/utils/index.js"],"names":["validSizes","Grid","setup","_tsa","TrackResolver","props","_config","mapping","key","value","_domTree","domTree","_sanitizeTracks","_sanitizeItems","_inflateTracks","_assignCoordinatesToCells","style","config","trackInfo","_fetchTrackInformation","gridTemplateRows","row","nameToLineMap","lineToNameMap","rowTracks","tracks","gridTemplateColumns","col","colTracks","i","len","splittedTrackInfo","split","nameList","sizeList","sanitizedTracks","startLineNames","endLineNames","filter","track","length","size","toLowerCase","replace","indexOf","isNaN","name","map","trim","push","start","end","forEach","items","children","sanitizedItems","itemStyle","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","sizedTracks","tsa","clear","set","item","width","resolveTracks","index","calculatedStyle","height","containerStyles","alignedBounds","rowTrackdp","colTrackdp","baseSize","layout","child","x","y","x2","y2","justifyItems","JUSTIFY_ALIGN_CENTER","justifySelf","Number","centerify","cell","startX","endX","alignItems","alignSelf","startY","endY","JUSTIFY_ALIGN_END","endify","replaceWithAbsValue","styleTrack","calculatedTrack","trackSplitAr","trackWithAbsValue","counter","test","updateDomTreeWithResolvedValues","grid","containerStyle","getConfig","j","rowTrackSum","colTrackSum","getDisplayProperty","userGivenStyles","computeGridLayout","count","computeLayoutHelper","compute","getMultiplierOfFr","_frSpaceDistributorHelper","totalSpaceUsed","containerSize","freeSpace","spacePerFrTrack","eligibleTracks","totalFrTrackRatio","multiplier","_intrinsicSpaceDistributorHelper","spacePerIntrinsicTrack","info","_initTrackSize","_initItems","_tracks","trackAr","type","growthLimit","frTracks","intrinsicTracks","Infinity","_items","_getParentSize","sort","a","b","gap1","gap2","parentTracks","widthOfParentTracks","_placeNonSpanningItems","_placeSpanningItems","_distributeFreeSpace","nonSpanningItems","trackIndex","Math","max","trackId","getComputeFn","display","DISPLAY_GRID","DISPLAY_FLEX","computeLayout","clonedDomTree","cloneObject","JUSTIFY_ALIGN_START","ATOMIC_DATA_TYPE","arg","Array","isArray","arr","cloneObj","axisStart","axisEnd","itemStart","itemSize","itemFreeSpaceStart","itemEnd","itemFreeSpaceEnd","totalFreeSpace"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Mason\"] = factory();\n\telse\n\t\troot[\"Mason\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { getDisplayProperty, centerify, endify } from \"../utils\";\nimport { computeLayoutHelper } from \"../mason\";\nimport TrackResolver from \"./track-sizing\";\nimport { JUSTIFY_ALIGN_CENTER, JUSTIFY_ALIGN_END } from \"../utils/constants\";\n\nconst validSizes = ['auto'];\nclass Grid {\n  constructor () {\n    this.setup();\n  }\n\n  setup () {\n    this._tsa = new TrackResolver();\n    this.props = {};\n    this._config = {\n      mapping: {}\n    };\n\n    return this;\n  }\n\n  set (key, value) {\n    this.props[key] = value;\n\n    return this;\n  }\n\n  getProps (key) {\n    return this.props[key];\n  }\n\n  getConfig (key) {\n    return this._config[key];\n  }\n\n  compute (_domTree) {\n    let domTree = _domTree || this.props.domTree;\n\n    this._sanitizeTracks(domTree)\n      ._sanitizeItems(domTree)\n      ._inflateTracks()\n      ._assignCoordinatesToCells(domTree);\n  }\n\n  _sanitizeTracks (_domTree = {}) {\n    let style = _domTree.style,\n      config = this._config,\n      trackInfo;\n\n    trackInfo = this._fetchTrackInformation(style.gridTemplateRows);\n    // trackInfo = this._considerTrackInfoFromChildren(_domTree, trackInfo, 'row');\n    config.mapping.row = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.rowTracks = trackInfo.tracks;\n\n    trackInfo = this._fetchTrackInformation(style.gridTemplateColumns);\n    config.mapping.col = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.colTracks = trackInfo.tracks;\n\n    return this;\n  }\n\n  _fetchTrackInformation (tracks) {\n    let i,\n      len,\n      splittedTrackInfo = tracks.split(' '),\n      nameList,\n      sizeList,\n      sanitizedTracks = [{}],\n      startLineNames,\n      endLineNames,\n      nameToLineMap = {},\n      lineToNameMap = {};\n\n    nameList = splittedTrackInfo.filter(track => {\n      if (typeof track === 'string' && track.length) {\n        len = track.length;\n        if (track[0] === '[' && track[len - 1] === ']') {\n          return true;\n        }\n        return false;\n      }\n      return true;\n    });\n\n    sizeList = splittedTrackInfo.filter(size => {\n      if (!size) return false;\n\n      len = (size + '').toLowerCase().replace(/px|fr/, '');\n      if (validSizes.indexOf(len) >= 0 || !isNaN(len)) {\n        return true;\n      }\n      return false;\n    });\n\n    for (i = 0, len = sizeList.length; i < len; i++) {\n      startLineNames = (nameList[i] && nameList[i].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 1 + ''];\n      endLineNames = (nameList[i + 1] && nameList[i + 1].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 2 + ''];\n\n      sanitizedTracks.push({\n        start: i + 1,\n        end: i + 2,\n        size: sizeList[i],\n      });\n\n      // A line can have multiple names but a name can only be assigned to a single line\n      lineToNameMap[i + 1] = startLineNames;\n      lineToNameMap[i + 2] = endLineNames;\n      startLineNames.forEach(name => nameToLineMap[name] = i + 1);\n      endLineNames.forEach(name => nameToLineMap[name] = i + 2);\n      nameToLineMap[i + 1] = i + 1;\n      nameToLineMap[i + 2] = i + 2;\n    }\n\n    return {\n      tracks: sanitizedTracks,\n      nameToLineMap,\n      lineToNameMap\n    };\n  }\n\n  _sanitizeItems (_domTree) {\n    let items = (_domTree || this.props.domTree).children || [],\n      mapping = this._config.mapping,\n      sanitizedItems = [],\n      itemStyle,\n      i,\n      len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      itemStyle = items[i].style;\n\n      sanitizedItems.push({\n        ...items[i],\n        rowStart: mapping.row.nameToLineMap[itemStyle.gridRowStart],\n        rowEnd: mapping.row.nameToLineMap[itemStyle.gridRowEnd],\n        colStart: mapping.col.nameToLineMap[itemStyle.gridColumnStart],\n        colEnd: mapping.col.nameToLineMap[itemStyle.gridColumnEnd]\n      });\n    }\n\n    this._config.sanitizedItems = sanitizedItems;\n    return this;\n  }\n\n  _inflateTracks () {\n    let { sanitizedItems, colTracks, rowTracks } = this._config,\n      sizedTracks,\n      { domTree } = this.props,\n      tsa = new TrackResolver();\n\n    sizedTracks = tsa.clear()\n      .set('tracks', colTracks)\n      .set('items', sanitizedItems.map(item => ({\n        start: item.colStart,\n        end: item.colEnd,\n        size: (item.style && item.style.width) || 'auto'\n      })))\n      .set('containerSize', (domTree.style && domTree.style.width) || 'auto')\n      .resolveTracks();\n\n    colTracks.forEach((track, index) => track.calculatedStyle = sizedTracks[index]);\n\n    sizedTracks = tsa.clear()\n      .set('tracks', rowTracks)\n      .set('items', sanitizedItems.map(item => ({\n        start: item.rowStart,\n        end: item.rowEnd,\n        size: (item.style && item.style.height) || 'auto'\n      })))\n      .set('containerSize', (domTree.style && domTree.style.height) || 'auto')\n      .resolveTracks();\n\n    rowTracks.forEach((track, index) => track.calculatedStyle = sizedTracks[index]);\n    return this;\n  }\n\n  _assignCoordinatesToCells (_domTree) {\n    let domTree = _domTree || this.props.domTree,\n      { sanitizedItems, rowTracks, colTracks } = this._config,\n      item,\n      len,\n      i,\n      containerStyles = domTree.style,\n      alignedBounds = {},\n      rowTrackdp = [0],\n      colTrackdp = [0];\n\n    for (i = 1, len = rowTracks.length; i < len; i++) {\n      rowTrackdp[i] = rowTrackdp[i - 1] + rowTracks[i].calculatedStyle.baseSize;\n    }\n\n    for (i = 1, len = colTracks.length; i < len; i++) {\n      colTrackdp[i] = colTrackdp[i - 1] + colTracks[i].calculatedStyle.baseSize;\n    }\n    domTree.layout = {\n      width: isNaN(domTree.width) ? colTrackdp[colTrackdp.length - 1] : domTree.width,\n      height: isNaN(domTree.height) ? rowTrackdp[rowTrackdp.length - 1] : domTree.height\n    };\n    domTree.children.forEach((child, index) => {\n      item = sanitizedItems[index];\n      child.layout = {\n        x: colTrackdp[item.colStart - 1],\n        y: rowTrackdp[item.rowStart - 1],\n        x2: colTrackdp[item.colEnd - 1],\n        y2: rowTrackdp[item.rowEnd - 1],\n        width: child.style.width,\n        height: child.style.height\n      };\n      if (containerStyles.justifyItems === JUSTIFY_ALIGN_CENTER || child.style.justifySelf == JUSTIFY_ALIGN_CENTER) {\n        if (!Number.isNaN(child.style.width)) {\n          alignedBounds = centerify(cell.startX, cell.endX, child.layout.startX, child.layout.width);\n          child.layout.startX = alignedBounds.start;\n          child.layout.endX = alignedBounds.end;\n        }\n      }\n      if (containerStyles.alignItems === JUSTIFY_ALIGN_CENTER || child.style.alignSelf == JUSTIFY_ALIGN_CENTER) {\n        if (!Number.isNaN(child.style.height)) {\n          alignedBounds = centerify(cell.startY, cell.endY, cell.startY, child.layout.height);\n          child.layout.startY = alignedBounds.start;\n          child.layout.endY = alignedBounds.end;\n        }\n      }\n      if (containerStyles.justifyItems === JUSTIFY_ALIGN_END || child.style.justifySelf == JUSTIFY_ALIGN_END) {\n        if (!Number.isNaN(child.style.width)) {\n          alignedBounds = endify(cell.startX, cell.endX, child.layout.startX, child.layout.width);\n          child.layout.startX = alignedBounds.start;\n          child.layout.endX = alignedBounds.end;\n        }\n      }\n      if (containerStyles.alignItems === JUSTIFY_ALIGN_END || child.style.alignSelf == JUSTIFY_ALIGN_END) {\n        if (!Number.isNaN(child.style.height)) {\n          alignedBounds = endify(cell.startY, cell.endY, cell.startY, child.layout.height);\n          child.layout.startY = alignedBounds.start;\n          child.layout.endY = alignedBounds.end;\n        }\n      }\n    });\n  }\n}\n\nconst replaceWithAbsValue = (styleTrack, calculatedTrack) => {\n    let trackSplitAr = styleTrack.split(' '),\n      trackWithAbsValue = '',\n      counter = 1;\n\n    trackSplitAr.forEach(track => {\n      if (validSizes.indexOf(track) > -1 || !isNaN(track) || /[0-9]fr/.test(track)) {\n        trackWithAbsValue += calculatedTrack[counter].calculatedStyle.baseSize + ' ';\n        counter++;\n      } else {\n        trackWithAbsValue += track + ' ';\n      }\n    });\n\n    return trackWithAbsValue.trim();\n  },\n  updateDomTreeWithResolvedValues = (domTree, grid) => {\n    let containerStyle = domTree.style,\n      rowTracks = grid.getConfig('rowTracks'),\n      colTracks = grid.getConfig('colTracks'),\n      mapping = grid.getConfig('mapping'),\n      { gridTemplateRows, gridTemplateColumns } = containerStyle,\n      child,\n      i,\n      j,\n      len,\n      rowTrackSum,\n      colTrackSum,\n      rowStart,\n      rowEnd,\n      colStart,\n      colEnd;\n\n    domTree.style.gridTemplateRows = replaceWithAbsValue(gridTemplateRows, rowTracks);\n    domTree.style.gridTemplateColumns = replaceWithAbsValue(gridTemplateColumns, colTracks);\n\n    for (i = 0, len = domTree.children.length; i < len; i++) {\n      child = domTree.children[i];\n      if (getDisplayProperty(child)) {\n        child.style.gridTemplateColumns = child.userGivenStyles.gridTemplateColumns;\n        child.style.gridTemplateRows = child.userGivenStyles.gridTemplateRows;\n        if (isNaN(child.userGivenStyles.width)) {\n          colStart = child.style.gridColumnStart;\n          colEnd = child.style.gridColumnEnd;\n\n          colStart = mapping.col.nameToLineMap[colStart];\n          colEnd = mapping.col.nameToLineMap[colEnd];\n\n          for (j = colStart, colTrackSum = 0; j < colEnd; j++) {\n            colTrackSum += colTracks[j].calculatedStyle.baseSize;\n          }\n          child.style.width = colTrackSum;\n        }\n        if (isNaN(child.userGivenStyles.height)) {\n          rowStart = child.style.gridRowStart;\n          rowEnd = child.style.gridRowEnd;\n\n          rowStart = mapping.row.nameToLineMap[rowStart];\n          rowEnd = mapping.row.nameToLineMap[rowEnd];\n          \n          for (j = rowStart, rowTrackSum = 0; j < rowEnd; j++) {\n            rowTrackSum += rowTracks[j].calculatedStyle.baseSize;\n          }\n          child.style.height = rowTrackSum;\n        }\n      }\n    }\n\n    return domTree;\n  },\n  computeGridLayout = (domTree, count = 1) => {\n    let i,\n      len,\n      child,\n      grid;\n\n    if (!domTree || !domTree.style) {\n      return;\n    }\n\n    if (!domTree.userGivenStyles) {\n      domTree.style.width = isNaN(domTree.style.width) ? 'auto' : domTree.style.width;\n      domTree.style.height = isNaN(domTree.style.height) ? 'auto' : domTree.style.height;\n      domTree.userGivenStyles = {\n        gridTemplateColumns: domTree.style.gridTemplateColumns,\n        gridTemplateRows: domTree.style.gridTemplateRows,\n        width: domTree.style.width,\n        height: domTree.style.height\n      };\n    }\n\n    for (i = 0, len = (domTree.children && domTree.children.length); i < len; i++) {\n      child = domTree.children[i];\n      if (getDisplayProperty(child)) {\n        computeLayoutHelper(child, domTree);\n      }\n    }\n\n    grid = new Grid();\n    grid.set('domTree', domTree)\n      .compute();\n\n    if (count < 2) {\n      computeGridLayout(updateDomTreeWithResolvedValues(domTree, grid), 2);\n    }\n\n    return domTree;\n  };\n\nexport {\n  computeGridLayout\n};\n","const getMultiplierOfFr = size => +size.replace(/fr/, ''),\n  _frSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerFrTrack,\n      eligibleTracks,\n      totalFrTrackRatio = 0;\n      \n    if (!tracks.length) {\n      return;\n    }\n\n    tracks.forEach(track => totalFrTrackRatio += track.multiplier);\n\n    freeSpace = containerSize - totalSpaceUsed;\n    spacePerFrTrack = freeSpace / totalFrTrackRatio;\n    \n    eligibleTracks = tracks.filter(track => track.baseSize <= track.multiplier * spacePerFrTrack);\n\n    if (eligibleTracks.length < tracks.length) {\n      tracks.filter(track => track.baseSize > track.multiplier * spacePerFrTrack).forEach(track => totalSpaceUsed += track.baseSize);\n      return _frSpaceDistributorHelper(eligibleTracks, totalSpaceUsed, containerSize);\n    } else {\n      eligibleTracks.forEach(track => track.baseSize = track.multiplier * spacePerFrTrack);\n    }\n  },\n  _intrinsicSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerIntrinsicTrack;\n\n    if (!tracks.length) {\n      return;\n    }\n\n    freeSpace = containerSize - totalSpaceUsed;\n    spacePerIntrinsicTrack = freeSpace / tracks.length;\n\n    tracks.forEach(track => track.baseSize += spacePerIntrinsicTrack);\n  };\n\nclass TrackResolver {\n  constructor (tracks = [], items = [], containerSize = 600) {\n    this.clear();\n\n    this.set('tracks', tracks);\n    this.set('items', items);\n    this.set('containerSize', containerSize);\n    return this;\n  }\n\n  set (key, info) {\n    this.props[key] = info;\n\n    switch (key) {\n    case 'tracks':\n      this._initTrackSize(); break;\n    case 'items':\n      this._initItems(); break;\n    case 'containerSize': \n      this.props[key] = isNaN(+info) ? 0 : +info;\n    }\n    return this;\n  }\n\n  get (key) {\n    return this.props[key];\n  }\n\n  _initTrackSize (_tracks) {\n    let tracks = _tracks || this.props.tracks || [],\n      config = this._config,\n      trackAr = [{}],\n      i,\n      len,\n      size,\n      type,\n      multiplier,\n      baseSize,\n      growthLimit;\n\n    config.frTracks = [];\n    config.intrinsicTracks = [];\n\n    for (i = 1, len = tracks.length; i < len; i++) {\n      size = tracks[i].size;\n\n      multiplier = 1;\n      if (!isNaN(+size)) {\n        baseSize = growthLimit = +size;\n        type = 'fixed';\n      } else if (size.indexOf('fr') > 0) {\n        baseSize = growthLimit = 0;\n        config.frTracks.push(i);\n        type = 'flex';\n        multiplier = getMultiplierOfFr(size);\n      } else {\n        baseSize = 0;\n        growthLimit = Infinity;\n        type = 'intrinsic';\n        config.intrinsicTracks.push(i);\n      }\n\n      trackAr.push({\n        ...tracks[i],\n        type,\n        multiplier,\n        baseSize,\n        growthLimit\n      });\n    }\n\n    return (config.sanitizedTracks = trackAr);\n  }\n\n  _initItems (_items) {\n    let items = _items || this.props.items || [],\n      sanitizedItems = [],\n      item,\n      i,\n      len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      sanitizedItems.push({...items[i]});\n\n      item = sanitizedItems[i];\n\n      item.size = isNaN(item.size) ? this._getParentSize(item) : +item.size;\n    }\n\n    sanitizedItems.sort(function (a, b) {\n      let gap1 = a.end - a.start,\n        gap2 = b.end - b.start;\n\n      if (gap1 === gap2) {\n        return a.start < b.start;\n      } else return gap1 < gap2;\n    });\n\n    return (this._config.sanitizedItems = sanitizedItems);\n  }\n\n  _getParentSize (item) {\n    let { sanitizedTracks } = this._config,\n      parentTracks,\n      widthOfParentTracks = 0;\n\n    parentTracks = sanitizedTracks.filter(track => (track.start >= item.start && track.end <= item.end));\n\n    parentTracks.forEach(track => widthOfParentTracks += track.baseSize);\n\n    return (widthOfParentTracks || 0);\n  }\n\n  resolveTracks () {\n    this._placeNonSpanningItems()\n      ._placeSpanningItems()\n      ._distributeFreeSpace();\n\n    return this._config.sanitizedTracks;\n  }\n\n  _placeNonSpanningItems () {\n    let { sanitizedItems, sanitizedTracks } = this._config,\n      nonSpanningItems = sanitizedItems.filter(item => (item.end - item.start) === 1),\n      track,\n      trackIndex;\n\n    nonSpanningItems.forEach(item => {\n      trackIndex = item.start;\n      track = sanitizedTracks[trackIndex];\n\n      if (track.type !== 'fixed') {\n        track.baseSize = Math.max(track.baseSize, item.size);\n        track.growthLimit = Math.max(track.growthLimit, track.baseSize);\n      }\n    });\n\n    return this;\n  }\n\n  _placeSpanningItems () {\n    return this;\n  }\n\n  _distributeFreeSpace () {\n    let { frTracks, intrinsicTracks, sanitizedTracks } = this._config,\n      { containerSize } = this.props,\n      totalSpaceUsed = 0;\n\n    sanitizedTracks.forEach(track => totalSpaceUsed += (track.baseSize || 0));\n\n    if (totalSpaceUsed < containerSize) {\n      if (frTracks.length) {\n        frTracks.forEach((trackId, index) => {frTracks[index] = sanitizedTracks[trackId];});\n        frTracks.forEach(track => totalSpaceUsed -= track.baseSize);\n        _frSpaceDistributorHelper(frTracks, totalSpaceUsed, containerSize);\n      } else if (intrinsicTracks.length) {\n        intrinsicTracks.forEach((trackId, index) => {intrinsicTracks[index] = sanitizedTracks[trackId];});\n        _intrinsicSpaceDistributorHelper(intrinsicTracks, totalSpaceUsed, containerSize);\n      }\n    }\n    return this;\n  }\n\n  clear () {\n    this.props = {};\n    this._config = {\n      frTracks: [],\n      intrinsicTracks: []\n    };\n\n    return this;\n  }\n}\n\nexport default TrackResolver;\n","import { computeLayout } from './mason';\n\nexport {\n  computeLayout\n};\n","import {computeGridLayout} from \"./grid\";\nimport { DISPLAY_GRID, DISPLAY_FLEX } from \"./utils/constants\";\nimport { getDisplayProperty, cloneObject } from \"./utils\";\n\nconst getComputeFn = (display) => {\n    switch(display) {\n    case DISPLAY_GRID: return computeGridLayout;\n    case DISPLAY_FLEX: return computeGridLayout;\n    default:\n      // Probably throw unsupported error?\n      return computeGridLayout;\n    }\n  },\n  computeLayoutHelper = domTree => {\n    return getComputeFn(getDisplayProperty(domTree))(domTree);\n  },\n  computeLayout = (domTree = {}) => {\n    let clonedDomTree = cloneObject(domTree);\n\n    return computeLayoutHelper(clonedDomTree);\n  };\n\nexport {\n  computeLayout,\n  computeLayoutHelper\n};\n","export const DISPLAY_GRID = 'grid';\nexport const DISPLAY_FLEX = 'flex';\nexport const JUSTIFY_ALIGN_CENTER = 'center';\nexport const JUSTIFY_ALIGN_START = 'start';\nexport const JUSTIFY_ALIGN_END = 'end';","const ATOMIC_DATA_TYPE = ['string', 'number', 'function', 'boolean', 'undefined'],\n  getDisplayProperty = (domTree) => {\n    return domTree.style && domTree.style.display;\n  },\n  cloneObject = (arg) => {\n    if ((ATOMIC_DATA_TYPE.indexOf(typeof arg) > -1) || arg === null) {\n      return arg;\n    }\n\n    if (Array.isArray(arg)) {\n      let i,\n        len,\n        arr = [];\n\n      for (i = 0, len = arg.length; i < len; i++) {\n        arr.push(cloneObject(arg[i]));\n      }\n\n      return arr;\n    } else if (typeof arg === 'object') {\n      let cloneObj = {},\n        key;\n\n      for (key in arg) {\n        cloneObj[key] = cloneObject(arg[key]);\n      }\n\n      return cloneObj;\n    }\n  },\n  centerify = (axisStart, axisEnd, itemStart, itemSize) => {\n    const itemFreeSpaceStart = itemStart - axisStart,\n      itemEnd = itemStart + itemSize,\n      itemFreeSpaceEnd = axisEnd - itemEnd,\n      totalFreeSpace = itemFreeSpaceStart + itemFreeSpaceEnd;\n\n    // Item's revised bounds along block axis\n    return {\n      start: axisStart + (totalFreeSpace / 2),\n      end: axisEnd - (totalFreeSpace / 2)\n    };\n  },\n  endify = (axisStart, axisEnd, itemStart, itemSize) => {\n    const itemFreeSpaceStart = itemStart - axisStart,\n      itemEnd = itemStart + itemSize,\n      itemFreeSpaceEnd = axisEnd - itemEnd,\n      totalFreeSpace = itemFreeSpaceStart + itemFreeSpaceEnd;\n\n    // Item's revised bounds along block axis\n    return {\n      start: axisStart + (totalFreeSpace),\n      end: axisStart + totalFreeSpace + itemSize\n    };\n  };\n\nexport {\n  cloneObject,\n  getDisplayProperty,\n  centerify,\n  endify\n};"],"sourceRoot":""}