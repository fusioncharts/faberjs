{"version":3,"sources":["webpack://Mason/webpack/universalModuleDefinition","webpack://Mason/webpack/bootstrap","webpack://Mason/./src/utils/constants.js","webpack://Mason/./src/utils/index.js","webpack://Mason/./src/grid/track-sizing.js","webpack://Mason/./src/grid/index.js","webpack://Mason/./src/grid/helpers/repeatResolver.js","webpack://Mason/./src/mason.js","webpack://Mason/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ATOMIC_DATA_TYPE","getDisplayProperty","domTree","style","display","pluckNumber","arg","arguments","length","isNaN","Number","UNDEF","getMultiplierOfFr","size","replace","TrackResolver","tracks","undefined","items","containerSize","_classCallCheck","this","clear","set","info","props","_initTrackSize","_initItems","_tracks","len","type","multiplier","baseSize","growthLimit","config","_config","trackAr","frTracks","intrinsicTracks","Array","isArray","indexOf","Infinity","push","Math","max","min","_objectSpread","sanitizedTracks","_items","nonSpanningItemStartIndex","item","sanitizedItems","validItems","start","end","autoFlow","_getParentSize","sort","a","b","gap1","gap2","widthOfParentTracks","filter","track","forEach","_placeNonSpanningItems","_placeSpanningItems","_distributeFreeSpace","trackIndex","_this$_config","slice","sizeConsumed","sizeLeft","sizePerTrack","availableTracks","hasFrTrack","_this$_config2","spanningItems","trackSizedp","_this$_config3","totalSpaceUsed","trackId","index","_frSpaceDistributorHelper","spacePerFrTrack","eligibleTracks","totalFrTrackRatio","freeSpace","spacePerIntrinsicTrack","minMaxTracks","frozenTrack","frozen","_intrinsicSpaceDistributorHelper","validSizes","minmaxRegex","getUCFirstString","str","charAt","toUpperCase","validNestedGrid","tree","_ref","gridTemplateColumns","gridTemplateRows","test","parseRepeatFunction","repeatStr","split","map","trim","getCleanSize","sizeAr","getItemSize","dimension","templateCol","parsedDim","trackDir","updateMatrix","grid","j","x","y","Grid","grid_classCallCheck","setup","_tsa","mapping","_domTree","_sanitizeTracks","_sanitizeItems","_inflateTracks","_assignCoordinatesToCells","trackInfo","_fetchTrackInformation","row","nameToLineMap","lineToNameMap","rowTracks","col","colTracks","nameList","sizeList","startLineNames","endLineNames","splittedTrackInfo","toLowerCase","itemStyle","cell","extraRows","children","gridAutoFlow","rowNum","keys","colNum","autoFlowItems","gridMatrix","freeCells","grid_objectSpread","rowStart","gridRowStart","rowEnd","gridRowEnd","colStart","gridColumnStart","colEnd","gridColumnEnd","shift","ceil","sizedTracks","minHeightContribution","minWidthContribution","_ref2","paddingStart","paddingEnd","paddingTop","paddingBottom","width","height","tsa","resolveTracks","calculatedStyle","_solveUnresolvedChildren","resolvedTracks","trackWidth","parsedWidthOfItem","childrenWithRepeatConfiguration","unResolvedChildren","child","parentReference","getProps","colTrackDp","parentInfo","numOfRows","rowWidth","itemInARow","newGridTemplateColumns","newGridTemplateRows","itemWidth","repeatResolver","gridLayoutEngine","trackHeight","_domTree$style","justifyItems","alignItems","rowTrackdp","colTrackdp","layout","justifySelf","alignSelf","padding","x2","y2","replaceWithAbsValue","styleTrack","calculatedTrack","trackSplitAr","trackWithAbsValue","counter","updateDomTreeWithResolvedValues","rowTrackSum","colTrackSum","containerStyle","getConfig","userGivenStyles","computeGridLayout","count","compute","LayoutEngine","mason_classCallCheck","computeLayout","mason","clonedDomTree","cloneObject","_typeof","arr","cloneObj","attachLayoutInformation","baseTree","calculatedTree","__webpack_exports__","mason_computeLayout"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,OAAA,GAAAH,GACA,iBAAAC,QACAA,QAAA,MAAAD,IAEAD,EAAA,MAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAT,QAAA,IAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,yCClFO,IAMMC,EAAmB,CAAC,SAAU,SAAU,WAAY,UAAW,kPCJ5E,IAAMC,EAAqB,SAACC,GACxB,OAAOA,EAAQC,OAASD,EAAQC,MAAMC,SAsCxCC,EAAc,WACZ,IAAIC,EACFtC,EACAC,EAEF,IAAKD,EAAI,EAAGC,EAAIsC,UAAUC,OAAQxC,EAAIC,EAAGD,GAAK,EAE5C,KADAsC,EAAMC,UAAUvC,MACI,IAARsC,GAAyB,IAARA,KAElBG,MAAMH,EAAMI,OAAOJ,IAG9B,OAAOA,EAET,OAAOK,80BCrDX,IAAMC,EAAoB,SAAAC,GAAI,OAAKA,EAAKC,QAAQ,KAAM,KAsUvCC,aA3Pb,SAAAA,IAA2D,IAA9CC,EAA8CT,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAArC,GAAIW,EAAiCX,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAzB,GAAIY,EAAqBZ,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAL,IAMpD,mGANyDa,CAAAC,KAAAN,GACzDM,KAAKC,QAELD,KAAKE,IAAI,SAAUP,GACnBK,KAAKE,IAAI,QAASL,GAClBG,KAAKE,IAAI,gBAAiBJ,GACnBE,wDAGJ9B,EAAKiC,GAGR,OAFAH,KAAKI,MAAMlC,GAAOiC,EAEVjC,GACR,IAAK,SACH8B,KAAKK,iBAAkB,MACzB,IAAK,QACHL,KAAKM,aAAc,MACrB,IAAK,gBACHN,KAAKI,MAAMlC,GAAOkB,OAAOe,GAAQ,GAAKA,EAExC,OAAOH,iCAGJ9B,GACH,OAAO8B,KAAKI,MAAMlC,0CAGJqC,GACd,IAGE5D,EACA6D,EACAhB,EACAiB,EACAC,EACAC,EACAC,EATEjB,EAASY,GAAWP,KAAKI,MAAMT,QAAU,GAC3CkB,EAASb,KAAKc,QACdC,EAAU,CAAC,IAYb,IAHAF,EAAOG,SAAW,GAClBH,EAAOI,gBAAkB,GAEpBtE,EAAI,EAAG6D,EAAMb,EAAOR,OAAQxC,EAAI6D,EAAK7D,IACxC6C,EAAOG,EAAOhD,GAAG6C,KAEjBkB,EAAa,EACTQ,MAAMC,QAAQ3B,IAChBmB,GAAYnB,EAAK,IAAM,EAEnBA,EAAK,GAAG4B,QAAQ,MAAQ,GAAK5B,EAAK,GAAG4B,QAAQ,MAAQ,GACvDR,EAAcS,IACdR,EAAOG,SAASM,KAAK3E,GACrB8D,EAAO,UACc,SAAZjB,EAAK,IAA6B,SAAZA,EAAK,IACpCoB,EAAcS,IACdR,EAAOI,gBAAgBK,KAAK3E,GAC5B8D,EAAO,UACGrB,OAAOI,EAAK,KAAQJ,OAAOI,EAAK,MAC1CoB,EAAcW,KAAKC,KAAKhC,EAAK,IAAKA,EAAK,IACvCmB,EAAWY,KAAKE,KAAKjC,EAAK,IAAKA,EAAK,IACpCqB,EAAOI,gBAAgBK,KAAK3E,GAC5B8D,EAAO,WAECrB,OAAOI,GAGRA,EAAK4B,QAAQ,MAAQ,GAC9BT,EAAW,EACXC,EAAcS,IACdR,EAAOG,SAASM,KAAK3E,GACrB8D,EAAO,OACPC,EAAanB,EAAkBC,KAE/BmB,EAAW,EACXC,EAAcS,IACdZ,EAAO,YACPI,EAAOI,gBAAgBK,KAAK3E,KAZ5BgE,EAAWC,GAAepB,EAC1BiB,EAAO,SAcTM,EAAQO,KAARI,EAAA,GACK/B,EAAOhD,GADZ,CAEE8D,OACAC,aACAC,WACAC,iBAIJ,OAAQC,EAAOc,gBAAkBZ,qCAGvBa,GACV,IAGEC,EACAC,EAEAnF,EACA6D,EAPEX,EAAQ+B,GAAU5B,KAAKI,MAAMP,OAAS,GACxCgB,EAASb,KAAKc,QACdiB,EAAiB,GAGjBC,EAAa,EAIf,IAAKrF,EAAI,EAAG6D,EAAMX,EAAMV,OAAQxC,EAAI6D,EAAK7D,IACnCyC,MAAMS,EAAMlD,GAAGsF,QAAU7C,MAAMS,EAAMlD,GAAGuF,KAC1CrB,EAAOsB,SAASb,KAAKzB,EAAMlD,KAG7BoF,EAAeT,KAAfI,EAAA,GAAwB7B,EAAMlD,KAE9BmF,EAAOC,EAAeC,GACtBA,IAEAF,EAAKtC,KAAOJ,MAAM0C,EAAKtC,MAAQQ,KAAKoC,eAAeN,IAASA,EAAKtC,MAYnE,IATAuC,EAAeM,KAAK,SAAUC,EAAGC,GAC/B,IAAIC,EAAOF,EAAEJ,IAAMI,EAAEL,MACnBQ,EAAOF,EAAEL,IAAMK,EAAEN,MAEnB,OAAIO,IAASC,EACJH,EAAEL,MAAQM,EAAEN,MACPO,EAAOC,IAGlB9F,EAAI,EAAGkF,EAA4BrB,EAAMuB,EAAe5C,OAAQxC,EAAI6D,EAAK7D,IAC5E,GAAIoF,EAAepF,GAAGuF,IAAMH,EAAepF,GAAGsF,MAAQ,EAAG,CACvDJ,EAA4BlF,EAC5B,MAMJ,OAFAqD,KAAKc,QAAQe,0BAA4BA,EAEjC7B,KAAKc,QAAQiB,eAAiBA,yCAGxBD,GACV,IAAEH,EAAoB3B,KAAKc,QAAzBa,gBAEJe,EAAsB,EAMxB,OAJef,EAAgBgB,OAAO,SAAAC,GAAK,OAAKA,EAAMX,OAASH,EAAKG,OAASW,EAAMV,KAAOJ,EAAKI,MAElFW,QAAQ,SAAAD,GAAK,OAAIF,GAAuBE,EAAMjC,WAEnD+B,GAAuB,0CAQ/B,OAJA1C,KAAK8C,yBACFC,sBACAC,uBAEIhD,KAAKc,QAAQa,iEAGI,IAGtBiB,EACAK,EAJsBC,EAC6ClD,KAAKc,QAApEiB,EADkBmB,EAClBnB,eAAgBJ,EADEuB,EACFvB,gBAAiBE,EADfqB,EACerB,0BAevC,OAdqBE,EAAeoB,MAAM,EAAGtB,GAI5BgB,QAAQ,SAAAf,GACvBmB,EAAanB,EAAKG,MAGC,WAFnBW,EAAQjB,EAAgBsB,IAEdxC,OACRmC,EAAMjC,SAAWY,KAAKC,IAAIoB,EAAMjC,SAAUmB,EAAKtC,MAC/CoD,EAAMhC,YAAcW,KAAKC,IAAIoB,EAAMhC,YAAagC,EAAMjC,aAInDX,mDAGc,IAInBoD,EACAC,EACAC,EACAC,EACAC,EACA7G,EACA6D,EAVmBiD,EAC0DzD,KAAKc,QAA9EiB,EADe0B,EACf1B,eAAgBJ,EADD8B,EACC9B,gBAAiBE,EADlB4B,EACkB5B,0BAA2Bb,EAD7CyC,EAC6CzC,SAChE0C,EAAgB3B,EAAeoB,MAAMtB,GACrC8B,EAAc,CAAC,GASjB,IAAKD,EAAcvE,OAAQ,OAAOa,KAElC,IAAKrD,EAAI,EAAG6D,EAAMmB,EAAgBxC,OAAQxC,EAAI6D,EAAK7D,IACjDgH,EAAYhH,GAAKgH,EAAYhH,EAAI,IAAMgF,EAAgBhF,GAAGgE,UAAY,GA2BxE,OAxBA+C,EAAcb,QAAQ,SAAAf,GAIpB,GAHAsB,EAAeO,EAAY7B,EAAKI,IAAM,GAAKyB,EAAY7B,EAAKG,MAAQ,GACpEoB,EAAW9B,KAAKC,IAAI,EAAGM,EAAKtC,KAAO4D,GAEnC,CAEA,IAAKzG,EAAImF,EAAKG,MAAOuB,GAAa,EAAOD,EAAkB,EAAG5G,EAAImF,EAAKI,IAAKvF,IACtEqE,EAASI,QAAQzE,IAAM,IACzB6G,GAAa,GAEiB,UAA5B7B,EAAgBhF,GAAG8D,MACrB8C,IAIJ,GAAKA,IAAmBC,EAGxB,IADAF,EAAeD,EAAWE,EACrB5G,EAAImF,EAAKG,MAAOtF,EAAImF,EAAKI,IAAKvF,IACD,UAA5BgF,EAAgBhF,GAAG8D,OACrBkB,EAAgBhF,GAAGgE,UAAY2C,MAI9BtD,oDAGe,IAAA4D,EAC+B5D,KAAKc,QAApDE,EADgB4C,EAChB5C,SAAUC,EADM2C,EACN3C,gBAAiBU,EADXiC,EACWjC,gBAC7B7B,EAAkBE,KAAKI,MAAvBN,cACF+D,EAAiB,EAcnB,OAZAlC,EAAgBkB,QAAQ,SAAAD,GAAK,OAAIiB,GAAmBjB,EAAMjC,UAAY,IAElEkD,EAAiB/D,IACfkB,EAAS7B,QACX6B,EAAS6B,QAAQ,SAACiB,EAASC,GAAW/C,EAAS+C,GAASpC,EAAgBmC,KACxE9C,EAAS6B,QAAQ,SAAAD,GAAK,OAAIiB,GAAkBjB,EAAMjC,WA/S5B,SAA5BqD,EAA6BrE,EAAQkE,EAAgB/D,GACnD,IACEmE,EACAC,EACAC,EAAoB,EAEtB,GAAKxE,EAAOR,OAAZ,CAWA,GAPAQ,EAAOkD,QAAQ,SAAAD,GAAK,OAAIuB,GAAqBvB,EAAMlC,aAGnDuD,GADYnE,EAAgB+D,GACEM,GAE9BD,EAAiBvE,EAAOgD,OAAO,SAAAC,GAAK,OAAIA,EAAMjC,UAAYiC,EAAMlC,WAAauD,KAE1D9E,OAASQ,EAAOR,OAEjC,OADAQ,EAAOgD,OAAO,SAAAC,GAAK,OAAIA,EAAMjC,SAAWiC,EAAMlC,WAAauD,IAAiBpB,QAAQ,SAAAD,GAAK,OAAIiB,GAAkBjB,EAAMjC,WAC9GqD,EAA0BE,EAAgBL,EAAgB/D,GAEjEoE,EAAerB,QAAQ,SAAAD,GAAK,OAAIA,EAAMjC,SAAWiC,EAAMlC,WAAauD,KA2RlED,CAA0BhD,EAAU6C,EAAgB/D,IAC3CmB,EAAgB9B,SACzB8B,EAAgB4B,QAAQ,SAACiB,EAASC,GAAW9C,EAAgB8C,GAASpC,EAAgBmC,KA1RzD,SAACnE,EAAQkE,EAAgB/D,GAC1D,IAAIsE,EACFC,EACA1H,EACA6D,EAEA8D,EACA1D,EACAD,EAHA4D,EAAc,EAKhB,GAAK5E,EAAOR,OAAZ,CAcA,IAVAiF,EAAYtE,EAAgB+D,GAD5BS,EAAe3E,EAAOgD,OAAO,SAAAC,GAAK,MAAmB,WAAfA,EAAMnC,MAAqBmC,EAAMhC,cAAgBS,OAG1EgB,KAAK,SAAUC,EAAGC,GAI7B,OAHWD,EAAE1B,YAAc0B,EAAE3B,UACtB4B,EAAE3B,YAAc2B,EAAE5B,YAK3BH,EAAM8D,EAAanF,OACZoF,EAAc/D,GAAO4D,GAK1B,IAJAC,EAAyBD,GAAcE,EAAanF,OAASoF,GAAgB,GAIxE5H,EAAI,EAAG6D,EAAM8D,EAAanF,OAAQxC,EAAK6D,EAAK7D,IAC/CiE,EAAc0D,EAAa3H,GAAGiE,YAG9BwD,IADAzD,EAAWY,KAAKE,IAAI4C,EAAyBC,EAAa3H,GAAGgE,SAAUC,IAC9C0D,EAAa3H,GAAGgE,SACzC2D,EAAa3H,GAAGgE,SAAWA,EAEvBC,IAAgBD,GAAa2D,EAAa3H,GAAG6H,SAC/CF,EAAa3H,GAAG6H,QAAS,EACzBD,KAKN5E,EAASA,EAAOgD,OAAO,SAAAC,GAAK,MAAoB,WAAfA,EAAMnC,MAAqBmC,EAAMhC,cAAgBS,KAA4B,WAAfuB,EAAMnC,OACrG4D,EAAyBD,EAAYzE,EAAOR,OAE5CQ,EAAOkD,QAAQ,SAAAD,GAAK,OAAIA,EAAMjC,UAAY0D,KA6OtCI,CAAiCxD,EAAiB4C,EAAgB/D,KAG/DE,qCAWP,OAPAA,KAAKI,MAAQ,GACbJ,KAAKc,QAAU,CACbE,SAAU,GACVC,gBAAiB,GACjBkB,SAAU,IAGLnC,i3BC/TX,IAAM0E,EAAa,CAAC,QAClBC,EAAc,SAIdC,EAAmB,SAAAC,GAAG,OAAKA,EAAIC,OAAO,GAAGC,cAAgBF,EAAI1B,MAAM,IACnE6B,EAAkB,SAAAC,GAAQ,IAAAC,EACwBD,EAAKnG,OAAS,GAAxDqG,EADkBD,EAClBC,oBAAqBC,EADHF,EACGE,iBAE3B,OAAI,YAAYC,KAAKF,KAAwB,YAAYE,KAAKD,IAKhEE,EAAsB,SAAAC,GACpB,OAAOA,EAAUC,MAAM,UAAU,GAAGA,MAAM,KAAKC,IAAI,SAAAxG,GAAG,OAAIA,GAAOA,EAAIyG,UAEvEC,EAAe,SAAAnG,GAEb,GAAa,UADbA,EAAOA,EAAKkG,QACS,OAAOlG,EAC5B,IAAKJ,OAAOI,GAAO,OAAQA,EAE3B,GAAImF,EAAYU,KAAK7F,GAAO,CAC1B,IAAIoG,EAASpG,EAAKgG,MAAM,UAAU,GAAGA,MAAM,KAE3C,MAAO,CACLI,EAAO,GAAGF,OACVE,EAAO,GAAGF,QAId,OAAOlG,GAETqG,EAAc,SAAChG,EAAOiG,GACpB,IACEC,EAEAvG,EADAwG,EAAYpB,EAAiBkB,GAE7BG,EAAyB,UAAdH,EAAwB,MAAQ,MAgB7C,OAdgBjG,EAAM4F,IAAI,SAAA3D,GAQxB,OAPAiE,EAAcjE,EAAKhD,MAAM,eAAiB8F,EAA8B,QAAbqB,EAAqB,UAAY,SAE1FzG,EAD+B,SAA7BZ,EAAmBkD,IAAoB,YAAYuD,KAAKU,GACnDT,EAAoBS,GAAa,GAEjCjE,EAAKhD,MAAM,MAAQkH,EAAY,iBAAmBlE,EAAKhD,MAAMgH,IAAc,OAG7E,CACL7D,MAAOH,EAAKmE,EAAW,SACvB/D,IAAKJ,EAAKmE,EAAW,OACrBzG,WAKN0G,EAAe,SAACC,EAAMlE,EAAOC,GAC3B,IAAIvF,EACFyJ,EAEF,IAAKzJ,EAAIsF,EAAMoE,EAAG1J,EAAIuF,EAAImE,EAAG1J,IAC3B,IAAKyJ,EAAInE,EAAMqE,EAAGF,EAAIlE,EAAIoE,EAAGF,IAC3BD,EAAKxJ,GAAGyJ,IAAK,GAIfG,aACJ,SAAAA,iGAAeC,CAAAxG,KAAAuG,GACbvG,KAAKyG,+DAUL,OANAzG,KAAK0G,KAAO,IAAIhH,EAChBM,KAAKI,MAAQ,GACbJ,KAAKc,QAAU,CACb6F,QAAS,IAGJ3G,iCAGJ9B,EAAKN,GAGR,OAFAoC,KAAKI,MAAMlC,GAAON,EAEXoC,sCAGC9B,GACR,OAAO8B,KAAKI,MAAMlC,qCAGTA,GACT,OAAO8B,KAAKc,QAAQ5C,mCAGb0I,GACP,IAAI/H,EAAU+H,GAAY5G,KAAKI,MAAMvB,QAErCmB,KAAK6G,gBAAgBhI,GAClBiI,eAAejI,GACfkI,iBACAC,0BAA0BnI,6CAGC,IAK5BoI,EALaL,EAAe1H,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAJ,GACtBJ,EAAQ8H,EAAS9H,MACjBsG,EAA0CtG,EAA1CsG,iBAAkBD,EAAwBrG,EAAxBqG,oBAEpBtE,EAASb,KAAKc,QAiBhB,OAdAmG,EAAYjH,KAAKkH,uBAAuB9B,GACxCvE,EAAO8F,QAAQQ,IAAM,CACnBC,cAAeH,EAAUG,cACzBC,cAAeJ,EAAUI,eAE3BxG,EAAOyG,UAAYL,EAAUtH,OAE7BsH,EAAYjH,KAAKkH,uBAAuB/B,GACxCtE,EAAO8F,QAAQY,IAAM,CACnBH,cAAeH,EAAUG,cACzBC,cAAeJ,EAAUI,eAE3BxG,EAAO2G,UAAYP,EAAUtH,OAEtBK,sDAGgC,IACnCrD,EACF6D,EAEAiH,EACAC,EAEAC,EACAC,EARoBjI,EAAiBT,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAR,OAG7B2I,EAAoBlI,EAAO6F,MA/HV,KAkIjB7D,EAAkB,CAAC,IAGnByF,EAAgB,GAChBC,EAAgB,GAuBlB,IArBAI,EAAWI,EAAkBlF,OAAO,SAAAC,GAClC,OAAIA,GAA0B,iBAAVA,IAAsBA,EAAMzD,SAC9CqB,EAAMoC,EAAMzD,OACK,MAAbyD,EAAM,IAAiC,MAAnBA,EAAMpC,EAAM,MAQxCkH,EAAWG,EAAkBlF,OAAO,SAAAnD,GAClC,QAAKA,IAELgB,GAAOhB,EAAO,IAAIsI,cAAcrI,QAAQ,QAAS,QAC7CiF,EAAWtD,QAAQZ,IAAQ,GAAKmE,EAAYU,KAAK7E,KAASpB,MAAMoB,OAInEiF,IAAI,SAAAjG,GAAI,OAAImG,EAAanG,KAEvB7C,EAAI,EAAG6D,EAAMkH,EAASvI,OAAQxC,EAAI6D,EAAK7D,IAC1CgL,EAAkBF,EAAS9K,IAAM8K,EAAS9K,GAAG8C,QAAQ,SAAU,IAAI+F,MAAM,KAAK7C,OAAO,SAAAzF,GAAI,OAAIA,EAAKiC,SAAQsG,IAAI,SAAAvI,GAAI,OAAIA,EAAKwI,UAAY,CAAC/I,EAAI,EAAI,IAChJiL,EAAgBH,EAAS9K,EAAI,IAAM8K,EAAS9K,EAAI,GAAG8C,QAAQ,SAAU,IAAI+F,MAAM,KAAK7C,OAAO,SAAAzF,GAAI,OAAIA,EAAKiC,SAAQsG,IAAI,SAAAvI,GAAI,OAAIA,EAAKwI,UAAY,CAAC/I,EAAI,EAAI,IAEtJgF,EAAgBL,KAAK,CACnBW,MAAOtF,EAAI,EACXuF,IAAKvF,EAAI,EACT6C,KAAMkI,EAAS/K,KAIjB0K,EAAc1K,EAAI,GAAKgL,EACvBN,EAAc1K,EAAI,GAAKiL,EACvBD,EAAe9E,QAAQ,SAAA3F,GAAI,OAAIkK,EAAclK,GAAQP,EAAI,IACzDiL,EAAa/E,QAAQ,SAAA3F,GAAI,OAAIkK,EAAclK,GAAQP,EAAI,IACvDyK,EAAczK,EAAI,GAAKA,EAAI,EAC3ByK,EAAczK,EAAI,GAAKA,EAAI,EAG7B,MAAO,CACLgD,OAAQgC,EACRyF,gBACAC,wDAIYT,GACd,IAQEmB,EAGAC,EACAlG,EACAmG,EACAtL,EACAyJ,EACA5F,EAhBE3B,EAAW+H,GAAY5G,KAAKI,MAAMvB,QACpCgB,EAAQhB,EAAQqJ,UAAY,GAC5BvB,EAAU3G,KAAKc,QAAQ6F,QACvBwB,EAAetJ,EAAQC,MAAMqJ,cAAgB,MAC7CC,EAAS/K,OAAOgL,KAAK1B,EAAQQ,IAAIE,eAAelI,OAChDmJ,EAASjL,OAAOgL,KAAK1B,EAAQY,IAAIF,eAAelI,OAChD4C,EAAiB,GACjBwG,EAAgB,GAEhBC,EAAa,CAAC,IACdC,EAAY,GAQd,IAAK9L,EAAI,EAAGA,GAAKyL,EAAQzL,IACvB6L,EAAWlH,KAAK,IAElB,IAAK3E,EAAI,EAAG6D,EAAMX,EAAMV,OAAQxC,EAAI6D,EAAK7D,IACvCoL,EAAYlI,EAAMlD,GAAGmC,MAErBiD,EAAeT,KAAfoH,EAAA,GACK7I,EAAMlD,GADX,CAEEgM,SAAUhC,EAAQQ,IAAIC,cAAcW,EAAUa,cAC9CC,OAAQlC,EAAQQ,IAAIC,cAAcW,EAAUe,YAC5CC,SAAUpC,EAAQY,IAAIH,cAAcW,EAAUiB,iBAC9CC,OAAQtC,EAAQY,IAAIH,cAAcW,EAAUmB,kBAE9CpH,EAAOC,EAAepF,GACtBuJ,EAAasC,EAAY,CAACnC,EAAGvE,EAAKiH,SAAUzC,EAAGxE,EAAK6G,UAAW,CAACtC,EAAGvE,EAAKmH,OAAQ3C,EAAGxE,EAAK+G,SAQ1F,IALAN,EAAgBxG,EAAeY,OAAO,SAAAb,GAAI,OAAMA,EAAKiH,WAAajH,EAAK6G,aAMhD,QAAjBR,EAAwB,CAC1B,IAAKxL,EAAI,EAAGA,EAAIyL,EAAQzL,IACtB,IAAKyJ,EAAI,EAAGA,EAAIkC,EAAQlC,IACjBoC,EAAW7L,GAAGyJ,IACjBqC,EAAUnH,KAAK,CAAC6F,IAAKxK,EAAG4K,IAAKnB,IAKnC,KAAOmC,EAAcpJ,QAAUsJ,EAAUtJ,QACvC2C,EAAOyG,EAAcY,QACrBnB,EAAOS,EAAUU,QAEjBrH,EAAK6G,SAAWX,EAAKb,IACrBrF,EAAKiH,SAAWf,EAAKT,IACrBzF,EAAK+G,OAASb,EAAKb,IAAM,EACzBrF,EAAKmH,OAASjB,EAAKT,IAAM,EAI3B,GADAU,EAAY1G,KAAK6H,KAAKb,EAAcpJ,OAASmJ,GAC9B,CACb,KAAOL,KACLpJ,EAAQC,MAAMsG,kBAAoB,QAClCuB,EAAQQ,IAAIC,cAAcgB,EAAS,GAAKA,EAAS,EACjDzB,EAAQQ,IAAIC,cAAcgB,EAAS,GAAKA,EAAS,EACjDA,IACAI,EAAWlH,KAAK,IAKlB,IAHAzC,EAAQC,MAAMsG,iBAAmBvG,EAAQC,MAAMsG,iBAAiBM,OAEhE+C,EAAY,GACP9L,EAAI,EAAGA,GAAKyL,EAAQzL,IACvB,IAAKyJ,EAAI,EAAGA,GAAKkC,EAAQlC,IAClBoC,EAAW7L,GAAGyJ,IACjBqC,EAAUnH,KAAK,CAAC6F,IAAKxK,EAAG4K,IAAKnB,IAInC,KAAOmC,EAAcpJ,QACnB2C,EAAOyG,EAAcY,QACrBnB,EAAOS,EAAUU,QAEjBrH,EAAK6G,SAAWX,EAAKb,IACrBrF,EAAKiH,SAAWf,EAAKT,IACrBzF,EAAK+G,OAASb,EAAKb,IAAM,EACzBrF,EAAKmH,OAASjB,EAAKT,IAAM,GAOjC,OADAvH,KAAKc,QAAQiB,eAAiBA,EACvB/B,uDAIP,OAAOA,8CAGS,IAEdqJ,EAFcnG,EAC+BlD,KAAKc,QAA9CiB,EADUmB,EACVnB,eAAgByF,EADNtE,EACMsE,UAAWF,EADjBpE,EACiBoE,UAE/BgC,EAAwB,EACxBC,EAAuB,EACrB1K,EAAYmB,KAAKI,MAAjBvB,QALY2K,EAM2D3K,EAAQC,OAAS,GAAxF2K,EANYD,EAMZC,aAAcC,EANFF,EAMEE,WAAYC,EANdH,EAMcG,WAAYC,EAN1BJ,EAM0BI,cAAeC,EANzCL,EAMyCK,MAAOC,EANhDN,EAMgDM,OAC9DC,EAAM,IAAIrK,EAkCZ,OAhCKN,OAAOyK,KACVA,GAAUJ,EAAeC,GAE3BL,EAAcU,EAAI9J,QACfC,IAAI,SAAUsH,GACdtH,IAAI,QAAS2F,EAAY9D,EAAgB,UACzC7B,IAAI,gBAAiB2J,GAAS,QAC9BG,gBAEHxC,EAAU3E,QAAQ,SAACD,EAAOmB,GACxBnB,EAAMqH,gBAAkBZ,EAAYtF,GACpCwF,GAAwBF,EAAYtF,GAAOpD,UAAY,IAGzDX,KAAKkK,2BAEA9K,OAAO0K,KACVA,GAAWH,EAAaC,GAE1BP,EAAcU,EAAI9J,QACfC,IAAI,SAAUoH,GACdpH,IAAI,QAAS2F,EAAY9D,EAAgB,WACzC7B,IAAI,gBAAiB4J,GAAU,QAC/BE,gBAEH1C,EAAUzE,QAAQ,SAACD,EAAOmB,GACxBnB,EAAMqH,gBAAkBZ,EAAYtF,GACpCuF,GAAyBD,EAAYtF,GAAOpD,UAAY,IAG1D9B,EAAQC,MAAMwK,sBAAwBA,EACtCzK,EAAQC,MAAMyK,qBAAuBA,EAC9BvJ,sDAGiB4G,GACpB,IAMFuD,EACAxN,EACA6D,EACA4J,EAEAC,EACAtB,EACAE,EAZAqB,IADY1D,GAAY5G,KAAKI,MAAMvB,SACQ0L,oBAAsB,IAAI5H,OAAO,SAAA6H,GAAK,MAAI,YAAYnF,KAAKmF,EAAM1L,MAAMqG,sBAC/G,YAAYE,KAAKmF,EAAM1L,MAAMsG,oBAF9B3B,EAGuBzD,KAAKc,QAA5B0G,EAHA/D,EAGA+D,UAAWb,EAHXlD,EAGWkD,QACb8D,EAAkBzK,KAAK0K,SAAS,UAChCC,EAAa,CAAC,GAUhB,IAAKL,EAAgCnL,OACnC,OAAOa,KAGT,IAAKrD,EAAI,EAAG6D,EAAMgH,EAAUrI,OAAQxC,EAAI6D,EAAK7D,IAC3CgO,EAAWhO,GAAKgO,EAAWhO,EAAI,GAAK6K,EAAU7K,GAAGsN,gBAAgBtJ,SAGnE2J,EAAgCzH,QAAQ,SAAA2H,GAEtCH,EAAoB/E,EAAoBkF,EAAM1L,MAAMqG,qBAAqB,GACzE4D,EAAWpC,EAAQY,IAAIH,cAAcoD,EAAM1L,MAAMkK,iBACjDC,EAAStC,EAAQY,IAAIH,cAAcoD,EAAM1L,MAAMoK,eAE/CkB,EAAaO,EAAW1B,EAAS,GAAM0B,EAAW5B,EAAW,GAM7DoB,EChXN,SAAyBtL,EAAS+L,GACN/L,EAApBC,MADsC,IAG1C+L,EAMAlO,EACA6D,EATW0H,EAAarJ,EAAbqJ,SACX4C,EAAW,EAEXC,EAAa,EAGbC,EAAyB,GACzBC,EAAsB,GAGtBnB,EAAS,EACPoB,EAAqBN,EAArBM,UAAWrB,EAAUe,EAAVf,MAYb,IAVFA,EAAQzK,OAAOyK,GAAS,GAAKA,EAE7B3B,EAASrF,QAAQ,SAAA2H,GAAK,OAAKV,EAASvI,KAAKC,IAAIsI,GAASU,EAAM1L,MAAMgL,QAAU,KAK1EgB,GAHFI,GAAaA,EAIXF,GAA2BE,EAAY,IACvCH,EAAa,EACRpO,EAAI,EAAG6D,EAAM0H,EAAS/I,OAAQxC,EAAI6D,KACjCsK,EAAWI,EAAYrB,GADelN,IAI1CmO,GAAYI,EACZF,GAA2BE,EAAY,IAMzC,IAHAH,EAAapO,EACbkO,EAAYtJ,KAAK6H,KAAK5I,EAAMuK,GAErBF,KACLI,GAAuBnB,EAAS,IAIpC,MAAO,CACL3E,oBAAqB6F,EAAuBtF,OAC5CN,iBAAkB6F,EAAoBvF,QDsUnByF,CAAeX,EALnB,CACXU,UAAWb,EACXR,MAAOO,IAKTI,EAAM1L,MAAMqG,oBAAsBgF,EAAehF,oBACjDqF,EAAM1L,MAAMsG,iBAAmB+E,EAAe/E,iBAE9CqF,EAAgBW,iBAAiBZ,uDAKV5D,GACrB,IAEF9E,EACAtB,EACA7D,EAEAyN,EACAiB,EACAxB,EACAC,EACAzD,EACAC,EAXEzH,EAAU+H,GAAY5G,KAAKI,MAAMvB,QAAjC+E,EACyC5D,KAAKc,QAA9CiB,EADA6B,EACA7B,eAAgBuF,EADhB1D,EACgB0D,UAAWE,EAD3B5D,EAC2B4D,UAD3B8D,EAKkFzM,EAAQC,MAA1FyM,EALAD,EAKAC,aAAcC,EALdF,EAKcE,WAAY/B,EAL1B6B,EAK0B7B,aAA0BE,GALpD2B,EAKwC5B,WALxC4B,EAKoD3B,YAOtD8B,GAZEH,EAKgE1B,cAOrD,CAACH,IACdiC,EAAa,CAAC/B,GAEhB,IAAKhN,EAAI,EAAG6D,EAAM8G,EAAUnI,OAAQxC,EAAI6D,EAAK7D,IAC3C8O,EAAW9O,GAAK8O,EAAW9O,EAAI,GAAK2K,EAAU3K,GAAGsN,gBAAgBtJ,SAGnE,IAAKhE,EAAI,EAAG6D,EAAMgH,EAAUrI,OAAQxC,EAAI6D,EAAK7D,IAC3C+O,EAAW/O,GAAK+O,EAAW/O,EAAI,GAAK6K,EAAU7K,GAAGsN,gBAAgBtJ,SAEnE9B,EAAQ8M,OAAS,CACftF,EAAG,EACHC,EAAG,EACHuD,MAAOzK,MAAMP,EAAQC,MAAM+K,OAAS6B,EAAWA,EAAWvM,OAAS,GAAKN,EAAQC,MAAM+K,MACtFC,OAAQ1K,MAAMP,EAAQC,MAAMgL,QAAU2B,EAAWA,EAAWtM,OAAS,GAAKN,EAAQC,MAAMgL,SAEzFjL,EAAQqJ,UAAY,IAAIrF,QAAQ,SAAC2H,EAAOzG,GAQvC,OAPAjC,EAAOC,EAAegC,GACtBqG,EAAasB,EAAW5J,EAAKmH,OAAS,GAAKyC,EAAW5J,EAAKiH,SAAW,GACtEsC,EAAcI,EAAW3J,EAAK+G,OAAS,GAAK4C,EAAW3J,EAAK6G,SAAW,GAEvEkB,EAAQzK,OAAOoL,EAAM1L,MAAM+K,OAASO,GAAcI,EAAM1L,MAAM+K,MAC9DC,EAAS1K,OAAOoL,EAAM1L,MAAMgL,QAAUuB,GAAeb,EAAM1L,MAAMgL,OAEzDyB,GAAgBf,EAAM1L,MAAM8M,aACpC,IHnagB,SGoadvF,EAAIqF,EAAW5J,EAAKiH,SAAW,GAAMqB,EAAa,EAAMP,EAAQ,EAAI,MACtE,IHnaa,MGoaXxD,EAAIqF,EAAW5J,EAAKmH,OAAS,GAAKY,EAAO,MAC3C,IHpaiB,UGqafA,EAAQO,EACR/D,EAAIqF,EAAW5J,EAAKiH,SAAW,GAAI,MACrC,QACE1C,EAAIqF,EAAW5J,EAAKiH,SAAW,GAGjC,OAAQyC,GAAchB,EAAM1L,MAAM+M,WAClC,IH/agB,SGgbdvF,EAAImF,EAAW3J,EAAK6G,SAAW,GAAM0C,EAAc,EAAMvB,EAAS,EAAI,MACxE,IH/aa,MGgbXxD,EAAImF,EAAW3J,EAAK+G,OAAS,GAAKiB,EAAQ,MAC5C,IHhbiB,UGibfA,EAASuB,EACT/E,EAAImF,EAAW3J,EAAK6G,SAAW,GAAI,MACrC,QACErC,EAAImF,EAAW3J,EAAK6G,SAAW,GAGjCtC,GAAKrH,EAAY8C,EAAKhD,MAAM2K,aAAc3H,EAAKhD,MAAMgN,QAAS,GAC9DxF,GAAKtH,EAAY8C,EAAKhD,MAAM6K,WAAY7H,EAAKhD,MAAMgN,QAAS,GAE5DtB,EAAMmB,OAAS,CACbtF,IACAC,IACAyF,GAAI1F,EAAIwD,EACRmC,GAAI1F,EAAIwD,EACRD,QACAC,iDAMFmC,EAAsB,WAAsC,IAArCC,EAAqChN,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAxB,GAAIiN,EAAoBjN,UAAAC,OAAA,EAAAD,UAAA,QAAAU,EAC1DwM,EAAeF,EAAW1G,MAncX,KAmcqC7C,OAAO,SAAAC,GAAK,OAAIA,KAAWA,EAAM8C,SACvF2G,EAAoB,GACpBC,EAAU,EAmBZ,OAjBIF,EAAajN,SAAY,WAAWkG,KAAK6G,GAC3CE,EAAavJ,QAAQ,SAAAD,GACf8B,EAAWtD,QAAQwB,IAAU,GAAK,UAAUyC,KAAKzC,IAAU+B,EAAYU,KAAKzC,KAAWxD,MAAMwD,IAC/FyJ,GAAqBF,EAAgBG,GAASrC,gBAAgBtJ,SAAW,IACzE2L,KAEAD,GAAqBzJ,EAAQ,MAIjCuJ,EAAgBtJ,QAAQ,SAAAD,GAClBxD,MAAMwD,EAAMqH,gBAAgBtJ,YAEhC0L,GAAsBzJ,EAAMqH,gBAAgBtJ,SAAW,OAIpD0L,EAAkB3G,QAE3B6G,EAAkC,SAAC1N,EAASsH,GACtC,IAKFqE,EACA7N,EACAyJ,EACA5F,EACAgM,EACAC,EACA9D,EACAE,EACAE,EACAE,EAdEyD,EAAiB7N,EAAQC,MAC3BwI,EAAYnB,EAAKwG,UAAU,aAC3BnF,EAAYrB,EAAKwG,UAAU,aAC3BhG,EAAUR,EAAKwG,UAAU,WACvBvH,EAA0CsH,EAA1CtH,iBAAkBD,EAAwBuH,EAAxBvH,oBAetB,IAHAtG,EAAQC,MAAMsG,iBAAmB6G,EAAoB7G,EAAkBkC,GACvEzI,EAAQC,MAAMqG,oBAAsB8G,EAAoB9G,EAAqBqC,GAExE7K,EAAI,EAAG6D,GAAO3B,EAAQqJ,UAAY,IAAI/I,OAAQxC,EAAI6D,EAAK7D,IAE1D,GADA6N,EAAQ3L,EAAQqJ,SAASvL,GACrBiC,EAAmB4L,GAAQ,CAG7B,GAFAA,EAAM1L,MAAMqG,oBAAsBqF,EAAMoC,gBAAgBzH,oBACxDqF,EAAM1L,MAAMsG,iBAAmBoF,EAAMoC,gBAAgBxH,iBACjDhG,MAAMoL,EAAMoC,gBAAgB/C,OAAQ,CAOtC,IANAd,EAAWyB,EAAM1L,MAAMkK,gBACvBC,EAASuB,EAAM1L,MAAMoK,cAErBH,EAAWpC,EAAQY,IAAIH,cAAc2B,GACrCE,EAAStC,EAAQY,IAAIH,cAAc6B,GAE9B7C,EAAI2C,EAAU0D,EAAc,EAAGrG,EAAI6C,EAAQ7C,IAC9CqG,GAAejF,EAAUpB,GAAG6D,gBAAgBtJ,SAE9C6J,EAAM1L,MAAM+K,MAAQ4C,EAEtB,GAAIrN,MAAMoL,EAAMoC,gBAAgB9C,QAAS,CAOvC,IANAnB,EAAW6B,EAAM1L,MAAM8J,aACvBC,EAAS2B,EAAM1L,MAAMgK,WAErBH,EAAWhC,EAAQQ,IAAIC,cAAcuB,GACrCE,EAASlC,EAAQQ,IAAIC,cAAcyB,GAE9BzC,EAAIuC,EAAU6D,EAAc,EAAGpG,EAAIyC,EAAQzC,IAC9CoG,GAAelF,EAAUlB,GAAG6D,gBAAgBtJ,SAE9C6J,EAAM1L,MAAMgL,OAAS0C,GAK3B,OAAO3N,GAGX,SAASgO,EAAmBhO,GAAoB,IAC1ClC,EACF6D,EAEAgK,EACArE,EALiC2G,EAAW5N,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAH,EAGzCJ,EAAQD,EAAQC,MAIlB,GAAKD,GAAYA,EAAQC,MAAzB,CAsBA,IAlBKD,EAAQ+N,kBACX/N,EAAQC,MAAM+K,MAAQzK,MAAMP,EAAQC,MAAM+K,OAAS,OAAShL,EAAQC,MAAM+K,MAC1EhL,EAAQC,MAAMgL,OAAS1K,MAAMP,EAAQC,MAAMgL,QAAU,OAASjL,EAAQC,MAAMgL,OAE5EhL,EAAM2K,aAAezK,EAAYF,EAAM2K,aAAc3K,EAAMgN,QAAS,GACpEhN,EAAM4K,WAAa1K,EAAYF,EAAM4K,WAAY5K,EAAMgN,QAAS,GAChEhN,EAAM6K,WAAa3K,EAAYF,EAAM6K,WAAY7K,EAAMgN,QAAS,GAChEhN,EAAM8K,cAAgB5K,EAAYF,EAAM8K,cAAe9K,EAAMgN,QAAS,GAEtEjN,EAAQ+N,gBAAkB,CACxBzH,oBAAqBtG,EAAQC,MAAMqG,oBACnCC,iBAAkBvG,EAAQC,MAAMsG,iBAChCyE,MAAOhL,EAAQC,MAAM+K,MACrBC,OAAQjL,EAAQC,MAAMgL,SAI1BjL,EAAQ0L,mBAAqB,GACxB5N,EAAI,EAAG6D,EAAO3B,EAAQqJ,UAAYrJ,EAAQqJ,SAAS/I,OAASxC,EAAI6D,EAAK7D,IACxE6N,EAAQ3L,EAAQqJ,SAASvL,GACrBiC,EAAmB4L,KACjBxF,EAAgBwF,GAClBxK,KAAK+M,QAAQvC,GAEb3L,EAAQ0L,mBAAmBjJ,KAAKkJ,IActC,OATArE,EAAO,IAAII,GACNrG,IAAI,UAAWrB,GACjBqB,IAAI,SAAUF,MACd+M,UAECD,EAAQ,GACV9M,KAAKoL,iBAAiBmB,EAAgC1N,EAASsH,GAAO,GAGjEtH,6KEvkBHmO,aACJ,SAAAA,iGAAeC,CAAAjN,KAAAgN,GACbhN,KAAKoL,iBAAmByB,yDAGjBhO,GACP,OAAQD,EAAmBC,IAE3B,ILZwB,OKaxB,ILZwB,OKaxB,QAEE,OAAOmB,KAAKoL,iBAAiBvM,yCAW7BqO,EAAgB,SAACrO,GACrB,IAAMsO,EAAQ,IAAIH,EACdI,EJxBU,SAAdC,EAAepO,GACb,GAAKN,EAAiByC,QAAjBkM,EAAgCrO,KAAQ,GAAc,OAARA,EACjD,OAAOA,EAGT,GAAIiC,MAAMC,QAAQlC,GAAM,CACtB,IAAItC,EACF6D,EACA+M,EAAM,GAER,IAAK5Q,EAAI,EAAG6D,EAAMvB,EAAIE,OAAQxC,EAAI6D,EAAK7D,IACrC4Q,EAAIjM,KAAK+L,EAAYpO,EAAItC,KAG3B,OAAO4Q,EACF,GAAmB,WAAfD,EAAOrO,GAAkB,CAClC,IACEf,EADEsP,EAAW,GAGf,IAAKtP,KAAOe,EACVuO,EAAStP,GAAOmP,EAAYpO,EAAIf,IAGlC,OAAOsP,GICSH,CAAYxO,GAOhC,OAJAuO,EAAcnR,MAAO,EJDK,SAA1BwR,IAAkE,IAC5D9Q,EACF6D,EAFuBkN,EAAuCxO,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAA5B,GAAIyO,EAAwBzO,UAAAC,OAAA,QAAAS,IAAAV,UAAA,GAAAA,UAAA,GAAP,GAMzD,IAFAwO,EAAS/B,OAASgC,EAAehC,OAE5BhP,EAAI,EAAG6D,GAAOkN,EAASxF,UAAY,IAAI/I,OAAQxC,EAAI6D,EAAK7D,IAC3D8Q,EAAwBC,EAASxF,SAASvL,GAAIgR,EAAezF,SAASvL,IIJ1E8Q,CAAwB5O,EADPsO,EAAMJ,QAAQK,IAGxBvO,GCpCTpC,EAAAQ,EAAA2Q,EAAA,kCAAAC","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Mason\"] = factory();\n\telse\n\t\troot[\"Mason\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export const DISPLAY_GRID = 'grid';\nexport const DISPLAY_FLEX = 'flex';\nexport const CENTER = 'center';\nexport const START = 'start';\nexport const END = 'end';\nexport const STRETCH = 'stretch';\nexport const ATOMIC_DATA_TYPE = ['string', 'number', 'function', 'boolean', 'undefined'];","import { ATOMIC_DATA_TYPE } from \"./constants\";\n\nconst getDisplayProperty = (domTree) => {\n    return domTree.style && domTree.style.display;\n  },\n  cloneObject = (arg) => {\n    if ((ATOMIC_DATA_TYPE.indexOf(typeof arg) > -1) || arg === null) {\n      return arg;\n    }\n\n    if (Array.isArray(arg)) {\n      let i,\n        len,\n        arr = [];\n\n      for (i = 0, len = arg.length; i < len; i++) {\n        arr.push(cloneObject(arg[i]));\n      }\n\n      return arr;\n    } else if (typeof arg === 'object') {\n      let cloneObj = {},\n        key;\n\n      for (key in arg) {\n        cloneObj[key] = cloneObject(arg[key]);\n      }\n\n      return cloneObj;\n    }\n  },\n  attachLayoutInformation = (baseTree = {}, calculatedTree = {}) => {\n    let i,\n      len;\n\n    baseTree.layout = calculatedTree.layout;\n\n    for (i = 0, len = (baseTree.children || []).length; i < len; i++) {\n      attachLayoutInformation(baseTree.children[i], calculatedTree.children[i]);\n    }\n  },\n  pluckNumber = function () {\n    var arg,\n      i,\n      l;\n\n    for (i = 0, l = arguments.length; i < l; i += 1) {\n      arg = arguments[i];\n      if (!arg && arg !== false && arg !== 0) {\n        continue;\n      } else if (isNaN(arg = Number(arg))) {\n        continue;\n      }\n      return arg;\n    }\n    return UNDEF;\n  };\n\nexport {\n  cloneObject,\n  attachLayoutInformation,\n  getDisplayProperty,\n  pluckNumber\n};","import { pluckNumber } from \"../utils\";\n\nconst getMultiplierOfFr = size => +size.replace(/fr/, ''),\n  _frSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerFrTrack,\n      eligibleTracks,\n      totalFrTrackRatio = 0;\n      \n    if (!tracks.length) {\n      return;\n    }\n\n    tracks.forEach(track => totalFrTrackRatio += track.multiplier);\n\n    freeSpace = containerSize - totalSpaceUsed;\n    spacePerFrTrack = freeSpace / totalFrTrackRatio;\n    \n    eligibleTracks = tracks.filter(track => track.baseSize <= track.multiplier * spacePerFrTrack);\n\n    if (eligibleTracks.length < tracks.length) {\n      tracks.filter(track => track.baseSize > track.multiplier * spacePerFrTrack).forEach(track => totalSpaceUsed += track.baseSize);\n      return _frSpaceDistributorHelper(eligibleTracks, totalSpaceUsed, containerSize);\n    } else {\n      eligibleTracks.forEach(track => track.baseSize = track.multiplier * spacePerFrTrack);\n    }\n  },\n  _intrinsicSpaceDistributorHelper = (tracks, totalSpaceUsed, containerSize) => {\n    let freeSpace,\n      spacePerIntrinsicTrack,\n      i,\n      len,\n      frozenTrack = 0,\n      minMaxTracks,\n      growthLimit,\n      baseSize;\n      \n    if (!tracks.length) {\n      return;\n    }\n    minMaxTracks = tracks.filter(track => track.type === 'minmax' && track.growthLimit !== Infinity);\n    freeSpace = containerSize - totalSpaceUsed;\n    \n    minMaxTracks.sort(function (a, b) {\n      let gap1 = a.growthLimit - a.baseSize,\n      gap2 = b.growthLimit - b.baseSize;\n      \n      return gap1 - gap2;\n    });\n    \n    len = minMaxTracks.length;\n    while (frozenTrack < len && freeSpace) {\n      spacePerIntrinsicTrack = freeSpace / ((minMaxTracks.length - frozenTrack) || 1);\n      /**\n       * @todo: remove the frozen tracks.\n       */\n      for (i = 0, len = minMaxTracks.length; i <  len; i++) {\n        growthLimit = minMaxTracks[i].growthLimit;\n        \n        baseSize = Math.min(spacePerIntrinsicTrack + minMaxTracks[i].baseSize, growthLimit);\n        freeSpace -= (baseSize - minMaxTracks[i].baseSize);\n        minMaxTracks[i].baseSize = baseSize;\n\n        if (growthLimit === baseSize && !minMaxTracks[i].frozen) {\n          minMaxTracks[i].frozen = true;\n          frozenTrack++;\n        }\n      }\n    }\n\n    tracks = tracks.filter(track => (track.type === 'minmax' && track.growthLimit === Infinity) || track.type !== 'minmax');\n    spacePerIntrinsicTrack = freeSpace / tracks.length;\n\n    tracks.forEach(track => track.baseSize += spacePerIntrinsicTrack);\n  };\n\nclass TrackResolver {\n  constructor (tracks = [], items = [], containerSize = 600) {\n    this.clear();\n\n    this.set('tracks', tracks);\n    this.set('items', items);\n    this.set('containerSize', containerSize);\n    return this;\n  }\n\n  set (key, info) {\n    this.props[key] = info;\n\n    switch (key) {\n    case 'tracks':\n      this._initTrackSize(); break;\n    case 'items':\n      this._initItems(); break;\n    case 'containerSize': \n      this.props[key] = isNaN(+info) ? 0 : +info;\n    }\n    return this;\n  }\n\n  get (key) {\n    return this.props[key];\n  }\n\n  _initTrackSize (_tracks) {\n    let tracks = _tracks || this.props.tracks || [],\n      config = this._config,\n      trackAr = [{}],\n      i,\n      len,\n      size,\n      type,\n      multiplier,\n      baseSize,\n      growthLimit;\n\n    config.frTracks = [];\n    config.intrinsicTracks = [];\n\n    for (i = 1, len = tracks.length; i < len; i++) {\n      size = tracks[i].size;\n\n      multiplier = 1;\n      if (Array.isArray(size)) {\n        baseSize = +size[0] || 0;\n\n        if (size[1].indexOf('fr') > 0 || size[0].indexOf('fr') > 0) {\n          growthLimit = Infinity;\n          config.frTracks.push(i);\n          type = 'minmax';\n        } else if (size[1] === 'auto' || size[0] === 'auto') {\n          growthLimit = Infinity;\n          config.intrinsicTracks.push(i);\n          type = 'minmax';\n        } else if (!isNaN(+size[0]) && !isNaN(+size[1])) {\n          growthLimit = Math.max(+size[0], +size[1]);\n          baseSize = Math.min(+size[0], +size[1]);\n          config.intrinsicTracks.push(i);\n          type = 'minmax'\n        }\n      } else if (!isNaN(+size)) {\n        baseSize = growthLimit = +size;\n        type = 'fixed';\n      } else if (size.indexOf('fr') > 0) {\n        baseSize = 0\n        growthLimit = Infinity;\n        config.frTracks.push(i);\n        type = 'flex';\n        multiplier = getMultiplierOfFr(size);\n      } else {\n        baseSize = 0;\n        growthLimit = Infinity;\n        type = 'intrinsic';\n        config.intrinsicTracks.push(i);\n      }\n\n      trackAr.push({\n        ...tracks[i],\n        type,\n        multiplier,\n        baseSize,\n        growthLimit\n      });\n    }\n\n    return (config.sanitizedTracks = trackAr);\n  }\n\n  _initItems (_items) {\n    let items = _items || this.props.items || [],\n      config = this._config,\n      sanitizedItems = [],\n      nonSpanningItemStartIndex,\n      item,\n      validItems = 0,\n      i,\n      len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n      if (isNaN(items[i].start) || isNaN(items[i].end)) {\n        config.autoFlow.push(items[i]);\n        continue;\n      }\n      sanitizedItems.push({...items[i]});\n      \n      item = sanitizedItems[validItems];\n      validItems++;\n\n      item.size = isNaN(item.size) ? this._getParentSize(item) : +item.size;\n    }\n\n    sanitizedItems.sort(function (a, b) {\n      let gap1 = a.end - a.start,\n        gap2 = b.end - b.start;\n\n      if (gap1 === gap2) {\n        return a.start - b.start;\n      } else return gap1 - gap2;\n    });\n\n    for (i = 0, nonSpanningItemStartIndex = len = sanitizedItems.length; i < len; i++) {\n      if (sanitizedItems[i].end - sanitizedItems[i].start > 1) {\n        nonSpanningItemStartIndex = i;\n        break;\n      }\n    }\n\n    this._config.nonSpanningItemStartIndex = nonSpanningItemStartIndex;\n\n    return (this._config.sanitizedItems = sanitizedItems);\n  }\n\n  _getParentSize (item) {\n    let { sanitizedTracks } = this._config,\n      parentTracks,\n      widthOfParentTracks = 0;\n\n    parentTracks = sanitizedTracks.filter(track => (track.start >= item.start && track.end <= item.end));\n\n    parentTracks.forEach(track => widthOfParentTracks += track.baseSize);\n\n    return (widthOfParentTracks || 0);\n  }\n\n  resolveTracks () {\n    this._placeNonSpanningItems()\n      ._placeSpanningItems()\n      ._distributeFreeSpace();\n\n    return this._config.sanitizedTracks;\n  }\n\n  _placeNonSpanningItems () {\n    let { sanitizedItems, sanitizedTracks, nonSpanningItemStartIndex } = this._config,\n      nonSpanningItems = sanitizedItems.slice(0, nonSpanningItemStartIndex),\n      track,\n      trackIndex;\n\n    nonSpanningItems.forEach(item => {\n      trackIndex = item.start;\n      track = sanitizedTracks[trackIndex];\n\n      if (track.type !== 'fixed') {\n        track.baseSize = Math.max(track.baseSize, item.size);\n        track.growthLimit = Math.max(track.growthLimit, track.baseSize);\n      }\n    });\n\n    return this;\n  }\n\n  _placeSpanningItems () {\n    let { sanitizedItems, sanitizedTracks, nonSpanningItemStartIndex, frTracks } = this._config,\n      spanningItems = sanitizedItems.slice(nonSpanningItemStartIndex),\n      trackSizedp = [0],\n      sizeConsumed,\n      sizeLeft,\n      sizePerTrack,\n      availableTracks,\n      hasFrTrack,\n      i,\n      len;\n\n    if (!spanningItems.length) return this;\n\n    for (i = 1, len = sanitizedTracks.length; i < len; i++) {\n      trackSizedp[i] = trackSizedp[i - 1] + (sanitizedTracks[i].baseSize || 0);\n    }\n\n    spanningItems.forEach(item => {\n      sizeConsumed = trackSizedp[item.end - 1] - trackSizedp[item.start - 1];\n      sizeLeft = Math.max(0, item.size - sizeConsumed);\n\n      if (!sizeLeft) return;\n\n      for (i = item.start, hasFrTrack = false, availableTracks = 0; i < item.end; i++) {\n        if (frTracks.indexOf(i) >= 0) {\n          hasFrTrack = true;\n        }\n        if (sanitizedTracks[i].type !== 'fixed') {\n          availableTracks++;\n        }\n      }\n\n      if (!availableTracks || hasFrTrack) return;\n\n      sizePerTrack = sizeLeft / availableTracks;\n      for (i = item.start; i < item.end; i++) {\n        if (sanitizedTracks[i].type !== 'fixed') {\n          sanitizedTracks[i].baseSize += sizePerTrack;\n        }\n      }\n    });\n    return this;\n  }\n\n  _distributeFreeSpace () {\n    let { frTracks, intrinsicTracks, sanitizedTracks } = this._config,\n      { containerSize } = this.props,\n      totalSpaceUsed = 0;\n\n    sanitizedTracks.forEach(track => totalSpaceUsed += (track.baseSize || 0));\n\n    if (totalSpaceUsed < containerSize) {\n      if (frTracks.length) {\n        frTracks.forEach((trackId, index) => {frTracks[index] = sanitizedTracks[trackId];});\n        frTracks.forEach(track => totalSpaceUsed -= track.baseSize);\n        _frSpaceDistributorHelper(frTracks, totalSpaceUsed, containerSize);\n      } else if (intrinsicTracks.length) {\n        intrinsicTracks.forEach((trackId, index) => {intrinsicTracks[index] = sanitizedTracks[trackId];});\n        _intrinsicSpaceDistributorHelper(intrinsicTracks, totalSpaceUsed, containerSize);\n      }\n    }\n    return this;\n  }\n\n  clear () {\n    this.props = {};\n    this._config = {\n      frTracks: [],\n      intrinsicTracks: [],\n      autoFlow: []\n    };\n\n    return this;\n  }\n}\n\nexport default TrackResolver;\n","import { getDisplayProperty, pluckNumber } from \"../utils\";\nimport TrackResolver from \"./track-sizing\";\nimport { CENTER, END, STRETCH } from \"../utils/constants\";\nimport { repeatResolver } from \"./helpers/repeatResolver\";\n\nconst validSizes = ['auto'],\n  minmaxRegex = /minmax/,\n  // repeatFunctionRegex = /repeat\\(/g,\n  // templateSplitRegex = /\\s(\\[.*\\])*(\\(.*\\))*/g,\n  templateSplitRegex = ' ',\n  getUCFirstString = str => (str.charAt(0).toUpperCase() + str.slice(1)),\n  validNestedGrid = tree => {\n    let { gridTemplateColumns, gridTemplateRows } = tree.style || {};\n\n    if (/repeat\\(/g.test(gridTemplateColumns) || /repeat\\(/g.test(gridTemplateRows)) {\n      return false;\n    }\n    return true;\n  },\n  parseRepeatFunction = repeatStr => {\n    return repeatStr.split(/\\(|\\)/g)[1].split(',').map(arg => arg && arg.trim());\n  },\n  getCleanSize = size => {\n    size = size.trim();\n    if (size === 'auto') return size;\n    if (!isNaN(+size)) return +size;\n\n    if (minmaxRegex.test(size)) {\n      let sizeAr = size.split(/\\(|\\)/g)[1].split(',');\n\n      return [\n        sizeAr[0].trim(),\n        sizeAr[1].trim()\n      ];\n    }\n\n    return size;\n  },\n  getItemSize = (items, dimension) => {\n    let filteredItems,\n      templateCol,\n      parsedDim = getUCFirstString(dimension),\n      size,\n      trackDir = dimension === 'width' ? 'col' : 'row';\n\n    filteredItems = items.map(item => {\n      templateCol = item.style['gridTemplate' + getUCFirstString(trackDir === 'col' ? 'columns' : 'rows')];\n      if (getDisplayProperty(item) === 'grid' && /repeat\\(/g.test(templateCol)) {\n        size = parseRepeatFunction(templateCol)[1];\n      } else {\n        size = item.style['min' + parsedDim + 'Contribution'] || item.style[dimension] || 'auto';\n      }\n\n      return {\n        start: item[trackDir + 'Start'],\n        end: item[trackDir + 'End'],\n        size\n      }\n    });\n    return filteredItems;\n  },\n  updateMatrix = (grid, start, end) => {\n    let i,\n      j;\n\n    for (i = start.x; i < end.x; i++) {\n      for (j = start.y; j < end.y; j++) {\n        grid[i][j] = true;\n      }\n    }\n  };\nclass Grid {\n  constructor () {\n    this.setup();\n  }\n\n  setup () {\n    this._tsa = new TrackResolver();\n    this.props = {};\n    this._config = {\n      mapping: {}\n    };\n\n    return this;\n  }\n\n  set (key, value) {\n    this.props[key] = value;\n\n    return this;\n  }\n\n  getProps (key) {\n    return this.props[key];\n  }\n\n  getConfig (key) {\n    return this._config[key];\n  }\n\n  compute (_domTree) {\n    let domTree = _domTree || this.props.domTree;\n\n    this._sanitizeTracks(domTree)\n      ._sanitizeItems(domTree)\n      ._inflateTracks()\n      ._assignCoordinatesToCells(domTree);\n  }\n\n  _sanitizeTracks (_domTree = {}) {\n    let style = _domTree.style,\n      { gridTemplateRows, gridTemplateColumns } = style,\n      repeatResolvedTracks,\n      config = this._config,\n      trackInfo;\n\n    trackInfo = this._fetchTrackInformation(gridTemplateRows);\n    config.mapping.row = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.rowTracks = trackInfo.tracks;\n\n    trackInfo = this._fetchTrackInformation(gridTemplateColumns);\n    config.mapping.col = {\n      nameToLineMap: trackInfo.nameToLineMap,\n      lineToNameMap: trackInfo.lineToNameMap\n    };\n    config.colTracks = trackInfo.tracks;\n\n    return this;\n  }\n\n  _fetchTrackInformation (tracks = 'auto') {\n    let i,\n      len,\n      splittedTrackInfo = tracks.split(templateSplitRegex),\n      nameList,\n      sizeList,\n      sanitizedTracks = [{}],\n      startLineNames,\n      endLineNames,\n      nameToLineMap = {},\n      lineToNameMap = {};\n\n    nameList = splittedTrackInfo.filter(track => {\n      if (track && typeof track === 'string' && track.length) {\n        len = track.length;\n        if (track[0] === '[' && track[len - 1] === ']') {\n          return true;\n        }\n        return false;\n      }\n      return true;\n    });\n\n    sizeList = splittedTrackInfo.filter(size => {\n      if (!size) return false;\n\n      len = (size + '').toLowerCase().replace(/px|fr/, '');\n      if (validSizes.indexOf(len) >= 0 || minmaxRegex.test(len) || !isNaN(len)) {\n        return true;\n      }\n      return false;\n    }).map(size => getCleanSize(size));\n\n    for (i = 0, len = sizeList.length; i < len; i++) {\n      startLineNames = (nameList[i] && nameList[i].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 1 + ''];\n      endLineNames = (nameList[i + 1] && nameList[i + 1].replace(/\\[|\\]/g, '').split(' ').filter(name => name.length).map(name => name.trim())) || [i + 2 + ''];\n\n      sanitizedTracks.push({\n        start: i + 1,\n        end: i + 2,\n        size: sizeList[i],\n      });\n\n      // A line can have multiple names but a name can only be assigned to a single line\n      lineToNameMap[i + 1] = startLineNames;\n      lineToNameMap[i + 2] = endLineNames;\n      startLineNames.forEach(name => nameToLineMap[name] = i + 1);\n      endLineNames.forEach(name => nameToLineMap[name] = i + 2);\n      nameToLineMap[i + 1] = i + 1;\n      nameToLineMap[i + 2] = i + 2;\n    }\n\n    return {\n      tracks: sanitizedTracks,\n      nameToLineMap,\n      lineToNameMap\n    };\n  }\n\n  _sanitizeItems (_domTree) {\n    let domTree = (_domTree || this.props.domTree),\n      items = domTree.children || [],\n      mapping = this._config.mapping,\n      gridAutoFlow = domTree.style.gridAutoFlow || 'row',\n      rowNum = Object.keys(mapping.row.lineToNameMap).length,\n      colNum = Object.keys(mapping.col.lineToNameMap).length,\n      sanitizedItems = [],\n      autoFlowItems = [],\n      itemStyle,\n      gridMatrix = [[]],\n      freeCells = [],\n      cell,\n      item,\n      extraRows,\n      i,\n      j,\n      len;\n\n    for (i = 1; i <= rowNum; i++) {\n      gridMatrix.push([]);\n    }\n    for (i = 0, len = items.length; i < len; i++) {\n      itemStyle = items[i].style;\n\n      sanitizedItems.push({\n        ...items[i],\n        rowStart: mapping.row.nameToLineMap[itemStyle.gridRowStart],\n        rowEnd: mapping.row.nameToLineMap[itemStyle.gridRowEnd],\n        colStart: mapping.col.nameToLineMap[itemStyle.gridColumnStart],\n        colEnd: mapping.col.nameToLineMap[itemStyle.gridColumnEnd]\n      });\n      item = sanitizedItems[i];\n      updateMatrix(gridMatrix, {x: item.colStart, y: item.rowStart}, {x: item.colEnd, y: item.rowEnd});\n    }\n\n    autoFlowItems = sanitizedItems.filter(item => (!item.colStart || !item.rowStart));\n\n    /**\n     * @todo: Scope to improve code here.\n     */\n    if (autoFlowItems) {\n      if (gridAutoFlow === 'row') {\n        for (i = 1; i < rowNum; i++) {\n          for (j = 1; j < colNum; j++) {\n            if (!gridMatrix[i][j]) {\n              freeCells.push({row: i, col: j});\n            }\n          }\n        }\n\n        while (autoFlowItems.length && freeCells.length) {\n          item = autoFlowItems.shift();\n          cell = freeCells.shift();\n\n          item.rowStart = cell.row;\n          item.colStart = cell.col;\n          item.rowEnd = cell.row + 1;\n          item.colEnd = cell.col + 1;\n        }\n\n        extraRows = Math.ceil(autoFlowItems.length / colNum);\n        if (extraRows) {\n          while (extraRows--) {\n            domTree.style.gridTemplateRows += 'auto ';\n            mapping.row.nameToLineMap[rowNum + 1] = rowNum + 1;\n            mapping.row.nameToLineMap[rowNum + 2] = rowNum + 2;\n            rowNum++;\n            gridMatrix.push([]);\n          }\n          domTree.style.gridTemplateRows = domTree.style.gridTemplateRows.trim();\n  \n          freeCells = [];\n          for (i = 1; i <= rowNum; i++) {\n            for (j = 1; j <= colNum; j++) {\n              if (!gridMatrix[i][j]) {\n                freeCells.push({row: i, col: j});\n              }\n            }\n          }\n          while (autoFlowItems.length) {\n            item = autoFlowItems.shift();\n            cell = freeCells.shift();\n\n            item.rowStart = cell.row;\n            item.colStart = cell.col;\n            item.rowEnd = cell.row + 1;\n            item.colEnd = cell.col + 1;\n          }\n        }\n      }\n    }\n\n    this._config.sanitizedItems = sanitizedItems;\n    return this;\n  }\n\n  _expandTracksIfRequired () {\n    return this;\n  }\n\n  _inflateTracks () {\n    let { sanitizedItems, colTracks, rowTracks } = this._config,\n      sizedTracks,\n      minHeightContribution = 0,\n      minWidthContribution = 0,\n      { domTree } = this.props,\n      { paddingStart, paddingEnd, paddingTop, paddingBottom, width, height } = domTree.style || {},\n      tsa = new TrackResolver();\n\n    if (!isNaN(+width)) {\n      width -= (paddingStart + paddingEnd);\n    }\n    sizedTracks = tsa.clear()\n      .set('tracks', colTracks)\n      .set('items', getItemSize(sanitizedItems, 'width'))\n      .set('containerSize', width || 'auto')\n      .resolveTracks();\n\n    colTracks.forEach((track, index) => {\n      track.calculatedStyle = sizedTracks[index];\n      minWidthContribution += sizedTracks[index].baseSize || 0;\n    });\n\n    this._solveUnresolvedChildren();\n\n    if (!isNaN(+height)) {\n      height -= (paddingTop + paddingBottom);\n    }\n    sizedTracks = tsa.clear()\n      .set('tracks', rowTracks)\n      .set('items', getItemSize(sanitizedItems, 'height'))\n      .set('containerSize', height || 'auto')\n      .resolveTracks();\n\n    rowTracks.forEach((track, index) => {\n      track.calculatedStyle = sizedTracks[index];\n      minHeightContribution += sizedTracks[index].baseSize || 0;\n    });\n\n    domTree.style.minHeightContribution = minHeightContribution;\n    domTree.style.minWidthContribution = minWidthContribution;\n    return this;\n  }\n\n  _solveUnresolvedChildren (_domTree) {\n    let domTree = _domTree || this.props.domTree,\n      childrenWithRepeatConfiguration = (domTree.unResolvedChildren || []).filter(child => /repeat\\(/g.test(child.style.gridTemplateColumns)\n      || /repeat\\(/g.test(child.style.gridTemplateRows)),\n      { colTracks, mapping } = this._config,\n      parentReference = this.getProps('parent'),\n      colTrackDp = [0],\n      resolvedTracks,\n      i,\n      len,\n      trackWidth,\n      parentInfo,\n      parsedWidthOfItem,\n      colStart,\n      colEnd;\n\n    if (!childrenWithRepeatConfiguration.length) {\n      return this;\n    }\n\n    for (i = 1, len = colTracks.length; i < len; i++) {\n      colTrackDp[i] = colTrackDp[i - 1] + colTracks[i].calculatedStyle.baseSize;\n    }\n\n    childrenWithRepeatConfiguration.forEach(child => {\n      // if (repeatFunctionRegex.test(child.style.gridTemplateColumns)) {\n      parsedWidthOfItem = parseRepeatFunction(child.style.gridTemplateColumns)[1];\n      colStart = mapping.col.nameToLineMap[child.style.gridColumnStart];\n      colEnd = mapping.col.nameToLineMap[child.style.gridColumnEnd];\n      \n      trackWidth = colTrackDp[colEnd - 1 ] - colTrackDp[colStart - 1];\n      parentInfo = {\n        itemWidth: parsedWidthOfItem,\n        width: trackWidth\n      };\n\n      resolvedTracks = repeatResolver(child, parentInfo);\n\n      child.style.gridTemplateColumns = resolvedTracks.gridTemplateColumns;\n      child.style.gridTemplateRows = resolvedTracks.gridTemplateRows;\n\n      parentReference.gridLayoutEngine(child);\n      // }\n    });\n  }\n\n  _assignCoordinatesToCells (_domTree) {\n    let domTree = _domTree || this.props.domTree,\n      { sanitizedItems, rowTracks, colTracks } = this._config,\n      item,\n      len,\n      i,\n      { justifyItems, alignItems, paddingStart, paddingEnd, paddingTop, paddingBottom } = domTree.style,\n      trackWidth,\n      trackHeight,\n      width,\n      height,\n      x,\n      y,\n      rowTrackdp = [paddingStart],\n      colTrackdp = [paddingTop];\n\n    for (i = 1, len = rowTracks.length; i < len; i++) {\n      rowTrackdp[i] = rowTrackdp[i - 1] + rowTracks[i].calculatedStyle.baseSize;\n    }\n\n    for (i = 1, len = colTracks.length; i < len; i++) {\n      colTrackdp[i] = colTrackdp[i - 1] + colTracks[i].calculatedStyle.baseSize;\n    }\n    domTree.layout = {\n      x: 0,\n      y: 0,\n      width: isNaN(domTree.style.width) ? colTrackdp[colTrackdp.length - 1] : domTree.style.width,\n      height: isNaN(domTree.style.height) ? rowTrackdp[rowTrackdp.length - 1] : domTree.style.height\n    };\n    (domTree.children || []).forEach((child, index) => {\n      item = sanitizedItems[index];\n      trackWidth = colTrackdp[item.colEnd - 1] - colTrackdp[item.colStart - 1];\n      trackHeight = rowTrackdp[item.rowEnd - 1] - rowTrackdp[item.rowStart - 1];\n      \n      width = isNaN(+child.style.width) ? trackWidth : +child.style.width;\n      height = isNaN(+child.style.height) ? trackHeight : +child.style.height;\n\n      switch (justifyItems || child.style.justifySelf) {\n      case CENTER:\n        x = colTrackdp[item.colStart - 1] + (trackWidth / 2) - (width / 2); break;\n      case END:\n        x = colTrackdp[item.colEnd - 1] - width; break;\n      case STRETCH:\n        width = trackWidth;\n        x = colTrackdp[item.colStart - 1]; break;\n      default:\n        x = colTrackdp[item.colStart - 1];\n      }\n\n      switch (alignItems || child.style.alignSelf) {\n      case CENTER:\n        y = rowTrackdp[item.rowStart - 1] + (trackHeight / 2) - (height / 2); break;\n      case END:\n        y = rowTrackdp[item.rowEnd - 1] - height; break;\n      case STRETCH:\n        height = trackHeight;\n        y = rowTrackdp[item.rowStart - 1]; break;\n      default:\n        y = rowTrackdp[item.rowStart - 1];\n      }\n\n      x += pluckNumber(item.style.paddingStart, item.style.padding, 0);\n      y += pluckNumber(item.style.paddingTop, item.style.padding, 0);\n\n      child.layout = {\n        x,\n        y,\n        x2: x + width,\n        y2: y + height,\n        width,\n        height\n      };\n    });\n  }\n}\n\nconst replaceWithAbsValue = (styleTrack = '', calculatedTrack) => {\n    let trackSplitAr = styleTrack.split(templateSplitRegex).filter(track => track && !!track.trim()),\n      trackWithAbsValue = '',\n      counter = 1;\n\n    if (trackSplitAr.length && !(/repeat\\(/.test(styleTrack))) {\n      trackSplitAr.forEach(track => {\n        if (validSizes.indexOf(track) > -1 || /[0-9]fr/.test(track) || minmaxRegex.test(track) || !isNaN(track)) {\n          trackWithAbsValue += calculatedTrack[counter].calculatedStyle.baseSize + ' ';\n          counter++;\n        } else {\n          trackWithAbsValue += track + ' ';\n        }\n      });\n    } else {\n      calculatedTrack.forEach(track => {\n        if (isNaN(track.calculatedStyle.baseSize)) return;\n        \n        trackWithAbsValue += (track.calculatedStyle.baseSize + ' ');\n      });\n    }\n\n    return trackWithAbsValue.trim();\n  },\n  updateDomTreeWithResolvedValues = (domTree, grid) => {\n    let containerStyle = domTree.style,\n      rowTracks = grid.getConfig('rowTracks'),\n      colTracks = grid.getConfig('colTracks'),\n      mapping = grid.getConfig('mapping'),\n      { gridTemplateRows, gridTemplateColumns } = containerStyle,\n      child,\n      i,\n      j,\n      len,\n      rowTrackSum,\n      colTrackSum,\n      rowStart,\n      rowEnd,\n      colStart,\n      colEnd;\n\n    domTree.style.gridTemplateRows = replaceWithAbsValue(gridTemplateRows, rowTracks);\n    domTree.style.gridTemplateColumns = replaceWithAbsValue(gridTemplateColumns, colTracks);\n\n    for (i = 0, len = (domTree.children || []).length; i < len; i++) {\n      child = domTree.children[i];\n      if (getDisplayProperty(child)) {\n        child.style.gridTemplateColumns = child.userGivenStyles.gridTemplateColumns;\n        child.style.gridTemplateRows = child.userGivenStyles.gridTemplateRows;\n        if (isNaN(child.userGivenStyles.width)) {\n          colStart = child.style.gridColumnStart;\n          colEnd = child.style.gridColumnEnd;\n\n          colStart = mapping.col.nameToLineMap[colStart];\n          colEnd = mapping.col.nameToLineMap[colEnd];\n\n          for (j = colStart, colTrackSum = 0; j < colEnd; j++) {\n            colTrackSum += colTracks[j].calculatedStyle.baseSize;\n          }\n          child.style.width = colTrackSum;\n        }\n        if (isNaN(child.userGivenStyles.height)) {\n          rowStart = child.style.gridRowStart;\n          rowEnd = child.style.gridRowEnd;\n\n          rowStart = mapping.row.nameToLineMap[rowStart];\n          rowEnd = mapping.row.nameToLineMap[rowEnd];\n          \n          for (j = rowStart, rowTrackSum = 0; j < rowEnd; j++) {\n            rowTrackSum += rowTracks[j].calculatedStyle.baseSize;\n          }\n          child.style.height = rowTrackSum;\n        }\n      }\n    }\n\n    return domTree;\n  };\n\nfunction computeGridLayout (domTree, count = 1) {\n  let i,\n    len,\n    style = domTree.style,\n    child,\n    grid;\n\n  if (!domTree || !domTree.style) {\n    return;\n  }\n\n  if (!domTree.userGivenStyles) {\n    domTree.style.width = isNaN(domTree.style.width) ? 'auto' : domTree.style.width;\n    domTree.style.height = isNaN(domTree.style.height) ? 'auto' : domTree.style.height;\n\n    style.paddingStart = pluckNumber(style.paddingStart, style.padding, 0);\n    style.paddingEnd = pluckNumber(style.paddingEnd, style.padding, 0);\n    style.paddingTop = pluckNumber(style.paddingTop, style.padding, 0);\n    style.paddingBottom = pluckNumber(style.paddingBottom, style.padding, 0);\n\n    domTree.userGivenStyles = {\n      gridTemplateColumns: domTree.style.gridTemplateColumns,\n      gridTemplateRows: domTree.style.gridTemplateRows,\n      width: domTree.style.width,\n      height: domTree.style.height\n    };\n  }\n\n  domTree.unResolvedChildren = [];\n  for (i = 0, len = (domTree.children && domTree.children.length); i < len; i++) {\n    child = domTree.children[i];\n    if (getDisplayProperty(child)) {\n      if (validNestedGrid(child)) {\n        this.compute(child);\n      } else {\n        domTree.unResolvedChildren.push(child);\n      }\n    }\n  }\n\n  grid = new Grid();\n  grid.set('domTree', domTree)\n    .set('parent', this)\n    .compute();\n\n  if (count < 2) {\n    this.gridLayoutEngine(updateDomTreeWithResolvedValues(domTree, grid), 2);\n  }\n\n  return domTree;\n}\n\nexport {\n  computeGridLayout\n};\n","const repeatDetectionRegex = /repeat\\(/g,\n  parseRepeatFunction = repeatStr => {\n    return repeatStr.split(/\\(|\\)/g)[1].split(',').map(arg => arg && arg.trim());\n  };\n\nfunction repeatResolver (domTree, parentInfo) {\n  let { style, children } = domTree,\n    rowWidth = 0,\n    numOfRows,\n    itemInARow = 0,\n    // itemWidth,\n    repeatStyle = 'auto-fit',\n    newGridTemplateColumns = '',\n    newGridTemplateRows = '',\n    i,\n    len,\n    height = 0,\n    { itemWidth, width } = parentInfo;\n\n  width = isNaN(+width) ? 0 : +width;\n\n  children.forEach(child => (height = Math.max(height, +child.style.height || 0)))\n  // [repeatStyle, itemWidth] = parseRepeatFunction(gridTemplateColumns);\n  itemWidth = +itemWidth;\n\n  if (repeatStyle === 'auto-fit') {\n    rowWidth += itemWidth;\n    newGridTemplateColumns += (itemWidth + ' ');\n    itemInARow = 1;\n    for (i = 1, len = children.length; i < len; i++) {\n      if (rowWidth + itemWidth > width) {\n        break;\n      }\n      rowWidth += itemWidth;\n      newGridTemplateColumns += (itemWidth + ' ');\n    }\n\n    itemInARow = i;\n    numOfRows = Math.ceil(len / itemInARow);\n\n    while (numOfRows--) {\n      newGridTemplateRows += height + ' ';\n    }\n  }\n\n  return {\n    gridTemplateColumns: newGridTemplateColumns.trim(),\n    gridTemplateRows: newGridTemplateRows.trim()\n  }\n}\n\nexport {\n  repeatResolver\n};\n","import { getDisplayProperty, cloneObject, attachLayoutInformation } from \"./utils\";\nimport { DISPLAY_GRID, DISPLAY_FLEX } from \"./utils/constants\";\nimport { computeGridLayout } from \"./grid\";\n\nclass LayoutEngine {\n  constructor () {\n    this.gridLayoutEngine = computeGridLayout;\n  }\n\n  compute (domTree) {\n    switch (getDisplayProperty(domTree)) {\n    \n    case DISPLAY_GRID: return this.gridLayoutEngine(domTree);\n    case DISPLAY_FLEX: return this.gridLayoutEngine(domTree);\n    default:\n      // Probably throw unsupported error?\n      return this.gridLayoutEngine(domTree);\n\n    }\n  }\n}\n\n/**\n * Public API used externally to provide input to layout engine\n * \n * @param {Object} domTree Object containing the layout node information\n */\nconst computeLayout = (domTree) => {\n  const mason = new LayoutEngine();\n  let clonedDomTree = cloneObject(domTree),\n    calculatedTree;\n\n  clonedDomTree.root = true;\n  calculatedTree = mason.compute(clonedDomTree);\n  attachLayoutInformation(domTree, calculatedTree);\n\n  return domTree;\n};\n\nexport {\n  computeLayout\n};\n","import { computeLayout } from './mason';\n\nexport {\n  computeLayout\n};\n"],"sourceRoot":""}